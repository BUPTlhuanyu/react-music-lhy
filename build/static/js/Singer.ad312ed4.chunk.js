(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{190:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return s});var i=n(44),a=n(12);function r(){var t=Object.assign({},a.b,{channel:"singer",page:"list",key:"all_all_all",pagesize:100,pagenum:1,hostUin:0,needNewCode:0,platform:"yqq"});return Object(i.a)("https://c.y.qq.com/v8/fcg-bin/v8.fcg",t,a.c)}function s(t){var e=Object.assign({},a.b,{hostUin:0,needNewCode:0,platform:"yqq",order:"listen",begin:0,num:80,songstatus:1,singermid:t});return Object(i.a)("https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg",e,a.c)}},194:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(7),a=function(t){return{type:i.i,singer:t}}},195:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(3),a=function t(e){var n=e.id,a=e.name;Object(i.a)(this,t),this.id=n,this.name=a,this.avatar="https://y.gtimg.cn/music/photo_new/T001R300x300M000".concat(n,".jpg?max_age=2592000")}},196:function(t,e,n){"use strict";var i=n(3),a=n(2),r=n(5),s=n(4),c=n(6),o=n(0),u=n.n(o),l=(n(197),n(47)),h=n(190),m=n(17),g=n(12),d=n(48),f=n(46),p=n(221),v=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(r.a)(this,Object(s.a)(e).call(this,t))).unmoutedFlag=void 0,n.back=function(){n.setState({showMusicList:!1})},n._getSingerDetail=function(){Object(h.a)(n.props.singer.id).then(function(t){t.code!==g.a||n.unmoutedFlag||n.setState({songs:n._normalizeSongs(t.data.list)})})},n._normalizeSongs=function(t){var e=[];return t.forEach(function(t){var n=t.musicData;n.songid&&n.albummid&&e.push(Object(f.a)(n))}),e},n.unmoutedFlag=!1,n.state={showMusicList:!0,songs:[]},n}return Object(c.a)(e,t),Object(a.a)(e,[{key:"componentDidMount",value:function(){this.props.singer&&this.props.singer.id<0?this.props.history.push("/singer"):this._getSingerDetail()}},{key:"componentWillUnmount",value:function(){this.unmoutedFlag=!0}},{key:"render",value:function(){var t=this,e=this.props.singer,n=this.state.songs;return u.a.createElement(l.CSSTransition,{in:this.state.showMusicList,timeout:500,classNames:"singer-detail-transition",appear:!0,unmountOnExit:!0,onExited:function(){t.props.history.goBack()}},u.a.createElement(d.a,{singerName:e.name,bgImage:e.avatar,songs:n,back:this.back}))}}]),e}(o.Component),b=Object(p.a)(Object(m.b)(function(t){return{singer:t.singer}})(v));e.a=b},197:function(t,e,n){},215:function(t,e,n){},217:function(t,e,n){},227:function(t,e,n){"use strict";n.r(e);var i,a=n(2),r=n(5),s=n(4),c=n(6),o=n(3),u=n(0),l=n.n(u),h=(n(215),n(190)),m=n(12),g=n(19),d=(n(217),n(49)),f=n(20),p=n(18),v=18,b=30,y=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(r.a)(this,Object(s.a)(e).call(this,t))).listview=void 0,n.listGroup=void 0,n.fixed=void 0,n.timer=void 0,n.refresh=function(){n.listview.current&&n.listview.current.refresh()},n.scrollHandler=function(t){if(!Object.is(t.y,NaN)&&n.fixed.current){var e=t.y,i=n.state.listHeight;if(e>0)n.setState({currentIndex:0});else{for(var a=0;a<i.length-1;a++){var r=i[a],s=i[a+1];if(-e>=r&&-e<s){n.setState({currentIndex:a});var c=s+e,o=c>0&&c<b?c-b:0;return void(n.fixed.current.style.transform="translate3d(0,".concat(o,"px,0)"))}}n.setState({currentIndex:i.length-2})}}},n.onTouchStartHandler=function(t){if(n.listGroup.current){var e=Object(p.b)(t.target,"index");if(e){var i=t.touches[0],a=Object.assign({},n.state.touch,{y1:i.pageY,anchorIndex:e});n.setState({currentIndex:e,touch:a}),n.listview.current&&n.listview.current.scrollToElement(n.listGroup.current.childNodes[e],0)}}},n.onTouchMoveHandler=function(t){t.stopPropagation();var e=t.touches[0],i=Object.assign({},n.state.touch,{y2:e.pageY});n.setState({touch:i},function(){if(n.listGroup.current){var t=(n.state.touch.y2-n.state.touch.y1)/v|0,e=parseInt(n.state.touch.anchorIndex)+t;if(e<0)e=0;else if(e>n.listGroup.current.childNodes.length-1)e=n.listGroup.current.childNodes.length-1;else if(Object.is(e,NaN))return;n.setState({currentIndex:e}),n.listview.current&&n.listview.current.scrollToElement(n.listGroup.current.childNodes[e],0)}})},n.selectItem=function(t){n.props.getItem(t)},n.listview=l.a.createRef(),n.listGroup=l.a.createRef(),n.fixed=l.a.createRef(),n.state={listHeight:[],currentIndex:0,touch:{y1:0,y2:0,anchorIndex:""}},n}return Object(c.a)(e,t),Object(a.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.timer=setTimeout(function(){t._calculateHeight()},1e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"_calculateHeight",value:function(){if(this.listGroup.current){var t=[],e=this.listGroup.current.children,n=0;t.push(n);for(var i=0;i<e.length;i++){n+=e[i].clientHeight,t.push(n)}this.setState({listHeight:t})}}},{key:"render",value:function(){var t=this,e=this.props.data,n=this.state.currentIndex,i=e.map(function(t){return t.title.substr(0,1)});return l.a.createElement(f.a,{className:"listview",ref:this.listview,scrollHandler:this.scrollHandler,probeType:3},l.a.createElement("ul",{ref:this.listGroup},!!e.length&&e.map(function(e,n){return l.a.createElement("li",{className:"list-group",key:n},l.a.createElement("h2",{className:"list-group-title"},e.title),l.a.createElement("ul",null,!!e.items.length&&e.items.map(function(e,n){return l.a.createElement("li",{className:"list-group-item",key:n,onClick:function(){t.selectItem(e)}},l.a.createElement(d.a,{className:"avatarListLazy avatar",containerClassName:"listview",sizes:"200px",srcset:e.avatar,width:"60",height:"60"}),l.a.createElement("span",{className:"name"},e.name))})))})),l.a.createElement("div",{className:"list-shortcut",onTouchStart:this.onTouchStartHandler,onTouchMove:this.onTouchMoveHandler},l.a.createElement("ul",null,!!i.length&&i.map(function(t,e){var i="item"+(n===e?" current":"");return l.a.createElement("li",{className:i,key:e,"data-index":e},t)}))),l.a.createElement("div",{className:"list-fixed",ref:this.fixed},l.a.createElement("div",{className:"fixed-title"}," ",e[n]?e[n].title:"")),!e.length&&l.a.createElement("div",{className:"loading-container"},l.a.createElement(g.a,null)))}}]),e}(u.Component),j=n(195),O=n(52),S=n(221),w=n(196),x=n(17),E=n(194),N=function t(e){Object(o.a)(this,t),this.hot=void 0,this.hot={title:e,items:[]}},k=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(r.a)(this,Object(s.a)(e).call(this,t))).unmoutedFlag=void 0,n.selectSinger=function(t){n.props.history.push("/singer/".concat(t.id)),n.props.setSinger(t)},n.unmoutedFlag=!1,n.state={singers:[]},n}return Object(c.a)(e,t),Object(a.a)(e,[{key:"componentDidMount",value:function(){i?this.setState({singers:i.singers}):this._getSingerList()}},{key:"componentWillUnmount",value:function(){i={singers:this.state.singers},this.unmoutedFlag=!0}},{key:"_getSingerList",value:function(){var t=this;Object(h.b)().then(function(e){e.code!==m.a||t.unmoutedFlag||t.setState({singers:t._normalizeSinger(e.data.list)})})}},{key:"_normalizeSinger",value:function(t){var e=new N("\u70ed\u95e8");t.forEach(function(t,n){n<10&&e.hot.items.push(new j.a({name:t.Fsinger_name,id:t.Fsinger_mid}));var i=t.Findex;e[i]||(e[i]={title:i,items:[]}),e[i].items.push(new j.a({name:t.Fsinger_name,id:t.Fsinger_mid}))});var n=[],i=[];for(var a in e){var r=e[a];r.title.match(/[a-zA-Z]/)?n.push(r):"\u70ed\u95e8"===r.title&&i.push(r)}return n.sort(function(t,e){return t.title.charCodeAt(0)-e.title.charCodeAt(0)}),i.concat(n)}},{key:"render",value:function(){var t=this.state.singers;return l.a.createElement("div",{className:"singer"},l.a.createElement(y,{data:t,getItem:this.selectSinger}),l.a.createElement(O.a,{path:"/singer/:id",component:w.a}))}}]),e}(u.Component),_=Object(S.a)(Object(x.b)(function(){return{}},function(t,e){return{setSinger:function(e){return t(Object(E.a)(e))}}})(k));e.default=_}}]);
//# sourceMappingURL=Singer.ad312ed4.chunk.js.map