(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{190:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});var a=n(44),r=n(12);function s(){var e=Object.assign({},r.b,{channel:"singer",page:"list",key:"all_all_all",pagesize:100,pagenum:1,hostUin:0,needNewCode:0,platform:"yqq"});return Object(a.a)("https://c.y.qq.com/v8/fcg-bin/v8.fcg",e,r.c)}function c(e){var t=Object.assign({},r.b,{hostUin:0,needNewCode:0,platform:"yqq",order:"listen",begin:0,num:80,songstatus:1,singermid:e});return Object(a.a)("https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg",t,r.c)}},191:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(192);t.a=function(e){var t=e.title,n=void 0===t?"":t;return r.a.createElement("div",{className:"no-result"},r.a.createElement("div",{className:"no-result-icon"}),r.a.createElement("p",{className:"no-result-text"},n))}},192:function(e,t,n){},194:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(7),r=function(e){return{type:a.i,singer:e}}},195:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(3),r=function e(t){var n=t.id,r=t.name;Object(a.a)(this,e),this.id=n,this.name=r,this.avatar="https://y.gtimg.cn/music/photo_new/T001R300x300M000".concat(n,".jpg?max_age=2592000")}},196:function(e,t,n){"use strict";var a=n(3),r=n(2),s=n(5),c=n(4),i=n(6),o=n(0),u=n.n(o),l=(n(197),n(47)),m=n(190),f=n(17),p=n(12),h=n(48),d=n(46),g=n(221),y=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).unmoutedFlag=void 0,n.back=function(){n.setState({showMusicList:!1})},n._getSingerDetail=function(){Object(m.a)(n.props.singer.id).then(function(e){e.code!==p.a||n.unmoutedFlag||n.setState({songs:n._normalizeSongs(e.data.list)})})},n._normalizeSongs=function(e){var t=[];return e.forEach(function(e){var n=e.musicData;n.songid&&n.albummid&&t.push(Object(d.a)(n))}),t},n.unmoutedFlag=!1,n.state={showMusicList:!0,songs:[]},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.singer&&this.props.singer.id<0?this.props.history.push("/singer"):this._getSingerDetail()}},{key:"componentWillUnmount",value:function(){this.unmoutedFlag=!0}},{key:"render",value:function(){var e=this,t=this.props.singer,n=this.state.songs;return u.a.createElement(l.CSSTransition,{in:this.state.showMusicList,timeout:500,classNames:"singer-detail-transition",appear:!0,unmountOnExit:!0,onExited:function(){e.props.history.goBack()}},u.a.createElement(h.a,{singerName:t.name,bgImage:t.avatar,songs:n,back:this.back}))}}]),t}(o.Component),v=Object(g.a)(Object(f.b)(function(e){return{singer:e.singer}})(y));t.a=v},197:function(e,t,n){},203:function(e,t,n){},205:function(e,t,n){var a=n(34),r=n(206),s=n(207),c="Expected a function",i=Math.max,o=Math.min;e.exports=function(e,t,n){var u,l,m,f,p,h,d=0,g=!1,y=!1,v=!0;if("function"!=typeof e)throw new TypeError(c);function b(t){var n=u,a=l;return u=l=void 0,d=t,f=e.apply(a,n)}function j(e){var n=e-h;return void 0===h||n>=t||n<0||y&&e-d>=m}function E(){var e=r();if(j(e))return O(e);p=setTimeout(E,function(e){var n=t-(e-h);return y?o(n,m-(e-d)):n}(e))}function O(e){return p=void 0,v&&u?b(e):(u=l=void 0,f)}function N(){var e=r(),n=j(e);if(u=arguments,l=this,h=e,n){if(void 0===p)return function(e){return d=e,p=setTimeout(E,t),g?b(e):f}(h);if(y)return p=setTimeout(E,t),b(h)}return void 0===p&&(p=setTimeout(E,t)),f}return t=s(t)||0,a(n)&&(g=!!n.leading,m=(y="maxWait"in n)?i(s(n.maxWait)||0,t):m,v="trailing"in n?!!n.trailing:v),N.cancel=function(){void 0!==p&&clearTimeout(p),d=0,u=h=l=p=void 0},N.flush=function(){return void 0===p?f:O(r())},N}},206:function(e,t,n){var a=n(36);e.exports=function(){return a.Date.now()}},207:function(e,t,n){var a=n(34),r=n(208),s=NaN,c=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return s;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=o.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):i.test(e)?s:+e}},208:function(e,t,n){var a=n(35),r=n(37),s="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||r(e)&&a(e)==s}},209:function(e,t,n){},211:function(e,t,n){},213:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var a=n(45),r=n(3),s=n(2),c=n(5),i=n(4),o=n(6),u=n(0),l=n.n(u),m=(n(203),n(205)),f=n.n(m),p=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(i.a)(t).call(this,e))).queryHandler=void 0,n.setQuery=function(e){n.setState({query:e})},n.onChangeHandler=function(e){n.setState({query:e.target.value}),n.queryHandlerDebounce(e.target.value)},n.queryHandlerDebounce=function(e){n.props.queryHandler(e)},n.clear=function(){n.setState({query:""}),n.props.queryHandler("")},n.queryHandlerDebounce=f()(n.queryHandlerDebounce,500,{leading:!1}),n.state={placeholder:"\u641c\u7d22\u6b4c\u66f2\u3001\u6b4c\u624b",query:""},n}return Object(o.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.placeholder,n=e.query;return l.a.createElement("div",{className:"search-box"},l.a.createElement("i",{className:"icon-search"}),l.a.createElement("input",{className:"box",placeholder:t,onChange:this.onChangeHandler.bind(this),value:n}),l.a.createElement("i",{className:"icon-dismiss",onClick:this.clear,style:{display:n?"":"none"}}))}}]),t}(u.Component),h=(n(209),n(44)),d=n(12),g=n(26),y=n.n(g);function v(e,t,n,a){var r=Object.assign({},d.b,{w:e,p:t,perpage:a,n:a,catZhida:n?1:0,zhidaqu:1,flag:1,ie:"utf-8",sem:1,uin:0,ct:24,qqmusic_ver:1298,new_json:1,remoteplace:"txt.yqq.song",searchid:0xdb5763020e79d8,t:0,aggr:1,cr:1,lossless:0,flag_qc:0,g_tk:5381,loginUin:0,hostUin:0,format:"json",inCharset:"utf8",outCharset:"utf-8",notice:0,platform:"yqq.json",needNewCode:0});return y.a.get("api/search",{params:r}).then(function(e){return Promise.resolve(e.data)})}var b=n(19),j=n(191),E=n(20),O=(n(211),n(221)),N=n(17),S=n(194),q=n(13),x=n(195),k="singer",_=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(i.a)(t).call(this,e))).suggest=void 0,n.getIconCls=function(e){return e.type===k?"icon-mine":"icon-music"},n.findIndex=function(e,t){return t&&e.findIndex(function(e){return e.id===t.id})},n.insertSong=function(e){var t=n.props.playlist.slice(),a=n.props.sequenceList.slice(),r=n.props.currentIndex,s=t[r],c=n.findIndex(t,e);r++,t.splice(r,0,e),c>-1&&(r>c?(t.splice(c,1),r--):t.splice(c+1,1));var i=n.findIndex(a,s)+1,o=n.findIndex(a,e);a.splice(i,0,e),o>-1&&(i>o?a.splice(o,1):a.splice(o+1,1)),n.props.setPlaylist(t),n.props.setSequenceList(a),n.props.setCurrentIndex(r),n.props.setFullScreen(!0),n.props.setPlaying(!0)},n.selectItem=function(e){if(e.type===k){var t=new x.a({id:e.singerMID,name:e.singerName});n.props.history.push("/search/".concat(t.id)),n.props.setSinger(t)}else n.insertSong(e);n.props.saveSearch()},n.getDisplayName=function(e){return e.type===k?e.singerName:"".concat(e.name,"-").concat(e.singer)},n.pullUpHandler=function(){n.props.suggestHandler()},n.suggest=l.a.createRef(),n}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){1===this.props.page&&this.suggest.current&&this.suggest.current.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.result,a=t.hasMore;return l.a.createElement(E.a,{probeType:1,pullUp:!0,pullUpHandler:this.pullUpHandler,className:"suggest",ref:this.suggest},l.a.createElement("ul",{className:"suggest-list"},!!n.length&&n.map(function(t,n){return l.a.createElement("li",{key:n,className:"suggest-item",onClick:function(){e.selectItem(t)}},l.a.createElement("div",{className:"icon"},l.a.createElement("i",{className:e.getIconCls(t)})),l.a.createElement("div",{className:"name"},l.a.createElement("p",{className:"text"},e.getDisplayName(t))))}),a&&l.a.createElement(b.a,null)),l.a.createElement("div",{className:"no-result-wrapper",style:{display:a||n.length?"none":""}},l.a.createElement(j.a,{title:"\u62b1\u6b49\uff0c\u6682\u65e0\u641c\u7d22\u7ed3\u679c"})))}}]),t}(u.Component),C=Object(O.a)(Object(N.b)(function(e){return{fullScreen:e.fullScreen,playlist:e.playlist,currentIndex:e.currentIndex,playing:e.playing,sequenceList:e.sequenceList}},function(e,t){return Object(a.a)({},t,{setSinger:function(t){return e(Object(S.a)(t))},setPlaying:function(t){return e(Object(q.d)(t))},setFullScreen:function(t){return e(Object(q.b)(t))},setSequenceList:function(t){return e(Object(q.f)(t))},setPlaylist:function(t){return e(Object(q.e)(t))},setCurrentIndex:function(t){return e(Object(q.a)(t))}})})(_)),H=n(46),w=n(52),I=n(196),M=n(7),D=n(77),z=(n(213),function(e){var t=e.searches,n=e.selectItem,a=e.deleteItem;return l.a.createElement("div",{className:"search-list",style:{display:t.length?"":"none"}},l.a.createElement("ul",null,!!t.length&&t.map(function(e,t){return l.a.createElement("li",{key:t,className:"search-item",onClick:function(){n(e)}},l.a.createElement("span",{className:"text"},e),l.a.createElement("span",{className:"icon",onClick:function(t){t.stopPropagation(),a(e)}},l.a.createElement("i",{className:"icon-delete"})))})))}),F=n(76),T="singer",U=20,L=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(i.a)(t).call(this,e))).searchBox=void 0,n.unmoutedFlag=void 0,n.confirm=void 0,n.onQueryChange=function(e){n.setState({query:e}),n.search(e)},n._getHotKey=function(){(function(){var e=Object.assign({},d.b,{uin:0,needNewCode:1,platform:"h5"});return Object(h.a)("https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg",e,d.c)})().then(function(e){e.code!==d.a||n.unmoutedFlag||n.setState({hotKey:e.data.hotkey.slice(0,10)})})},n.addQuery=function(e){n.searchBox.current&&(n.searchBox.current.setQuery(e),n.setState({query:e}),n.search(e))},n.search=function(e){n.setState({page:1,hasMore:!0}),v(e,n.state.page,!0,U).then(function(e){e.code!==d.a||n.unmoutedFlag||n.setState({result:n._genResult(e.data),hasMore:n._checkMore(e.data)})})},n._checkMore=function(e){var t=e.song;return!(!t.list.length||t.curnum+t.curpage*U>t.totalnum)},n._genResult=function(e){var t=[];return e.zhida&&e.zhida.zhida_singer&&e.zhida.zhida_singer.singerID&&t.push(Object(a.a)({},e.zhida.zhida_singer,{type:T})),e.song&&(t=t.concat(n._normalizeSongs(e.song.list))),t},n.searchMore=function(){n.state.hasMore&&(n.setState(function(e){return{page:e.page+1}}),v(n.state.query,n.state.page,!0,U).then(function(e){e.code!==d.a||n.unmoutedFlag||n.setState({result:n.state.result.concat(n._genResult(e.data)),hasMore:n._checkMore(e.data)})}))},n.saveSearch=function(){n.props.setSearchHistory(Object(D.d)(n.state.query))},n.deleteSearch=function(e){n.props.setSearchHistory(Object(D.b)(e))},n.clearSearchHistory=function(){n.props.setSearchHistory(Object(D.a)())},n.showConfirm=function(){n.confirm.current&&n.confirm.current.show()},n.unmoutedFlag=!1,n.searchBox=l.a.createRef(),n.confirm=l.a.createRef(),n.state={hotKey:[],query:"",page:1,result:[],hasMore:!1},n}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._getHotKey()}},{key:"_normalizeSongs",value:function(e){var t=[];return e.forEach(function(e){e.id&&e.album.mid&&t.push(Object(H.b)(e))}),t}},{key:"render",value:function(){var e=this,t=this.state,n=t.hotKey,a=t.query,r=t.result,s=t.hasMore,c=t.page,i=this.props.searchHistory;return l.a.createElement("div",{className:"search"},l.a.createElement("div",{className:"search-box-wrapper"},l.a.createElement(p,{ref:this.searchBox,queryHandler:this.onQueryChange})),l.a.createElement("div",{className:"shortcut-wrapper",style:{display:a?"none":""}},l.a.createElement("div",{className:"shortcut"},l.a.createElement("div",null,l.a.createElement("div",{className:"hot-key"},l.a.createElement("h1",{className:"title"},"\u70ed\u95e8\u641c\u7d22"),l.a.createElement("ul",null,!!n.length&&n.map(function(t,n){return l.a.createElement("li",{key:n,className:"item",onClick:function(){e.addQuery(t.k)}},l.a.createElement("span",null,t.k))}))),l.a.createElement("div",{className:"search-history"},l.a.createElement("h1",{className:"title"},l.a.createElement("span",{className:"text"},"\u641c\u7d22\u5386\u53f2"),l.a.createElement("span",{className:"clear",onClick:this.showConfirm},l.a.createElement("i",{className:"icon-clear"}))),l.a.createElement(z,{searches:i,selectItem:this.addQuery,deleteItem:this.deleteSearch}))))),l.a.createElement("div",{className:"search-result",style:{display:a?"":"none"}},l.a.createElement(C,{result:r,hasMore:s,suggestHandler:this.searchMore,page:c,saveSearch:this.saveSearch})),l.a.createElement(F.a,{ref:this.confirm,text:"\u662f\u5426\u6e05\u7a7a\u6240\u6709\u641c\u7d22\u5386\u53f2",confirmBtnText:"\u6e05\u7a7a",confirmHandler:this.clearSearchHistory}),l.a.createElement(w.a,{path:"/search/:id",component:I.a}))}}]),t}(u.Component);t.default=Object(N.b)(function(e){return{searchHistory:e.searchHistory}},function(e){return{setSearchHistory:function(t){e(function(e){return{type:M.g,searchHistory:e}}(t))}}})(L)}}]);
//# sourceMappingURL=Search.1f542f5d.chunk.js.map