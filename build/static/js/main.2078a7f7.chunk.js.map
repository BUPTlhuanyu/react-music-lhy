{"version":3,"sources":["api/config.js","app/actions/player.ts","common/js/config.js","common/js/dom.js","app/components/header/Header.tsx","app/components/tab/Tab.tsx","app/components/recommend/Recommend.tsx","app/components/player/Player.tsx","app/reusablecomponents/carousel/Carousel.tsx","app/components/disc/Disc.tsx","api/recommend.js","app/actions/disc.ts","app/reusablecomponents/progress-bar/ProgressBar.tsx","app/reusablecomponents/progress-circle/ProgressCircle.tsx","app/components/playlist/PlayList.tsx","app/App.tsx","serviceWorker.ts","app/store/stateTypes.ts","app/store/store.ts","app/reducers/singer.ts","app/reducers/disc.ts","app/reducers/rank.ts","app/reducers/search.ts","app/reducers/index.ts","app/reducers/player.ts","index.tsx","app/reusablecomponents/loading/Loading.tsx","app/reusablecomponents/scroll/Scroll.tsx","common/js/util.js","app/reusablecomponents/lazyimg/logo@2x.png","common/js/ws.js","common/js/song.js","api/song.js","app/reusablecomponents/song-list/SongList.tsx","app/components/music-list/MusicList.tsx","common/js/lazyload.es2015.js","app/reusablecomponents/lazyimg/Lazy-img.tsx","app/actions/actionsTypes.ts","app/reusablecomponents/confirm/Confirm.tsx","common/js/cache.js","app/reusablecomponents/loading/loading.gif"],"names":["__webpack_require__","d","__webpack_exports__","commonParams","options","ERR_OK","g_tk","inCharset","outCharset","notice","format","param","setPlaying","setFullScreen","setPlaylist","setSequenceList","setPlayMode","setCurrentIndex","_actionsTypes__WEBPACK_IMPORTED_MODULE_0__","playing","type","types","fullScreen","playlist","sequenceList","mode","currentIndex","playMode","sequence","loop","random","addClass","el","className","RegExp","test","hasClass","newClass","split","push","join","getData","name","val","setAttribute","getAttribute","prefixStyle","elementStyle","document","createElement","style","vendor","transformNames","webkit","Moz","O","ms","standard","key","undefined","charAt","toUpperCase","substr","Header","react_default","a","Link","to","Component","Tab","NavLink","activeClassName","cacheData","currentId","Carousel","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","carousel","carouselGroup","children","resizeTimer","carouselBS","timer","React","createRef","state","autoPlay","interval","showDot","click","threshold","speed","dots","currentPageIndex","_this2","update","window","addEventListener","enabled","clearTimeout","setTimeout","isInTransition","_onScrollEnd","_play","refresh","destroy","init","setState","_setSlideWidth","_initDots","_initSlide","Array","length","fill","_this3","current","BScroll","scrollX","scrollY","momentum","snap","bounce","stopPropagation","on","bind","isResize","arguments","width","sliderWidth","clientWidth","i","child","_this4","next","pageIndex","getCurrentPage","pageX","_this$state","ref","map","item","index","DiscBase","unmoutedFlag","back","showMusicList","_normalizeSongs","list","ret","forEach","musicData","songid","albummid","createSong","songs","_getSongList","disc","dissid","disstid","data","assign","json","utf8","onlysong","loginUin","hostUin","platform","needNewCode","axios","get","params","then","res","Promise","resolve","getSongList","code","cdlist","songlist","history","react_transition_group","in","timeout","classNames","appear","unmountOnExit","onExited","goBack","MusicList","singerName","dissname","bgImage","imgurl","Disc","withRouter","connect","ownProps","objectSpread","Recommend","selectDisc","concat","setDisc","recommends","discList","console","log","getRecommend","getDiscList","uin","jsonp","slider","picmid","rnd","categoryId","sortId","sin","ein","Scroll","Carousel_Carousel","href","linkUrl","src","picUrl","onClick","Lazy_img","containerClassName","sizes","srcset","height","creator","Loading","Route","path","component","dispatch","progressBtnWidth","transform","ProgressBar","progressBar","progress","progressBtn","touch","progressClick","e","rect","getBoundingClientRect","offsetWidth","left","_offset","_triggerPercent","progressTouchStart","preventDefault","initiated","startX","touches","progressTouchMove","deltaX","Math","min","max","progressTouchEnd","barWidth","percent","onProgressBarChange","onTouchStart","onTouchMove","onTouchEnd","ProgressCircle","dashOffset","is","NaN","dashArray","PI","radius","viewBox","version","xmlns","r","cx","cy","strokeDasharray","strokeDashoffset","PlayList","confirm","listContent","scrollSon","show","showFlag","scrollToCurrent","childNodes","hide","showConfirm","_this$props","iconMode","changeMode","modeText","deleteSongList","getCurrentIcon","selectItem","deleteSong","display","Confirm","text","confirmBtnText","confirmHandler","transitionDuration","Player","audio","lyricList","lyricLine","middleL","getLyric","currentLyric","stop","currentSong","lyric","Lyric","handleLyric","play","catch","playingLyric","currentLineNum","_ref","lineNum","txt","lineEl","scrollToElement","scrollTo","open","prev","songReady","togglePlaying","updateTime","currentTime","target","minute","second","_pad","num","n","len","toString","duration","seek","canPlayHandler","id","playHandler","disableCls","pause","togglePlay","toggleMiniPlaying","cdCls","playIcon","miniIcon","shuffle","resetCurrentIndex","findIndex","end","middleTouchStart","startY","pageY","middleTouchMove","wrapper","deltaY","abs","currentShow","innerWidth","opacity","middleTouchEnd","showPlaylist","song","slice","pIndex","splice","sIndex","scroller","styleDisplay","image","singer","lines","line","reusablecomponents_progress_bar_ProgressBar","position","reusablecomponents_progress_circle_ProgressCircle","components_playlist_PlayList","url","onCanPlay","onTimeUpdate","onEnded","App","components_header_Header","components_tab_Tab","Switch","exact","render","Redirect","Rank","Search","Singer","UserCenter","player_Player","Loadable","loader","loading","Boolean","location","hostname","match","createStoreWithMiddleware","defaultState","commit_time","createtime","introduction","listennum","score","searchHistory","loadSearch","avatar","topList","listenCount","songList","topTitle","action","reducer","combineReducers","createLogger","applyMiddleware","thunkMiddleware","createStore","fastClick","attach","body","initialState","store","ReactDOM","es","BrowserRouter","app_App","getElementById","navigator","serviceWorker","ready","registration","unregister","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","_loading_gif__WEBPACK_IMPORTED_MODULE_2__","_loading_gif__WEBPACK_IMPORTED_MODULE_2___default","_ref$text","loadingGif","F_web_music_lhy_react_music_lhy_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","F_web_music_lhy_react_music_lhy_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","F_web_music_lhy_react_music_lhy_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","wrapperBs","_initScroll","probeType","scrollHandler","pullUpHandler","listenScroll","pos","pullUp","y","maxScrollY","F_web_music_lhy_react_music_lhy_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","_len","args","_key","apply","_len2","_key2","react__WEBPACK_IMPORTED_MODULE_6___default","arr","_arr","j","floor","t","module","exports","parseQueryParams","queryStr","p","encodeURIComponent","option","indexOf","reject","originJsonp","err","Song","mid","album","songmid","pcachetime","Date","retcode","Base64","decode","createSongSearch","filterSinger","songname","albumname","url1","s","SongList","getRankCls","getRankText","rank","backdrop","RESERVED_HEIGHT","layer","filter","playBtn","newY","translateY","minTransalteY","scale","zIndex","blur","imageHeight","paddingTop","handlePlaylist","bottom","selectSong","randomList","listTop","clientHeight","top","backgroundImage","reusablecomponents_song_list_SongList","defaultSettings","elements_selector","container","thresholds","data_src","data_srcset","data_sizes","data_bg","class_loading","class_loaded","class_error","load_delay","callback_load","callback_error","callback_set","callback_enter","callback_finish","to_webp","element","attribute","setData","value","attrName","removeAttribute","setWasProcessedData","getWasProcessedData","setTimeoutData","getTimeoutData","createInstance","classObj","event","instance","CustomEvent","detail","createEvent","initCustomEvent","dispatchEvent","replaceExtToWebp","condition","replace","runningOnBrowser","isBot","userAgent","supportsIntersectionObserver","supportsClassList","supportsWebp","canvas","getContext","toDataURL","detectWebp","setSourcesInChildren","parentTag","dataAttrName","toWebpFlag","childTag","tagName","attrValue","setAttributeIfValue","setSourcesFunctions","IMG","settings","srcsetDataName","parent","parentNode","sizesDataValue","srcsetDataValue","srcDataValue","IFRAME","VIDEO","srcDataName","load","setSources","elements","elementToPurge","_settings","setSourcesFunction","_updateLoadingCount","_elements","bgDataValue","setValue","setSourcesBgImage","classList","add","callbackIfSet","callback","argument","eventName","handler","removeEventListener","removeEventListeners","loadHandler","errorHandler","eventHandler","success","remove","removeClass","addOneShotEventListeners","addEventListeners","managedTags","loadAndUnobserve","observer","revealElement","unobserve","cancelDelayLoad","timeoutId","force","isIntersecting","entry","intersectionRatio","LazyLoad","customSettings","getInstanceSettings","_setObserver","_loadingCount","prototype","_manageIntersection","_observer","loadDelay","delayLoad","_onIntersection","entries","IntersectionObserver","root","rootMargin","plusMinus","nodeSet","querySelectorAll","purgeProcessedElements","observe","loadAll","optionsItem","autoInitialize","lazyLoadOptions","LazyImage","_Component","lazyLoadInstance","inherits","createClass","getElementsByClassName","lazyloadConfig","alt","logo","data-src","data-srcset","data-sizes","SET_SINGER","SET_PLAYING_STATE","SET_FULL_SCREEN","SET_PLAYLIST","SET_SEQUENCE_LIST","SET_PLAY_MODE","SET_CURRENT_INDEX","SET_DISC","SET_TOP_LIST","SET_SEARCH_HISTORY","cancel","cancelBtnText","react__WEBPACK_IMPORTED_MODULE_5___default","saveSearch","deleteSearch","clearSearch","good_storage__WEBPACK_IMPORTED_MODULE_0__","SEARCH_KEY","SEARCH_MAX_LEN","insertArray","compare","maxLen","unshift","pop","deleteFromArray","query","searches","storage","set"],"mappings":"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","file":"static/js/main.2078a7f7.chunk.js","sourcesContent":["export const commonParams = {\n  g_tk: 1928093487,\n  inCharset: 'utf-8',\n  outCharset: 'utf-8',\n  notice: 0,\n  format: 'jsonp'\n}\n\nexport const options = {\n  param: 'jsonpCallback'\n}\n\nexport const ERR_OK = 0","import * as types from './actionsTypes'\r\nimport {\r\n    IPlaying,\r\n    IFullScreen,\r\n    IPlaylist,\r\n    ISequenceList,\r\n    IMode,\r\n    ICurrentIndex,\r\n    IActionCreator\r\n}from 'store/stateTypes'\r\n\r\nexport const setPlaying : IActionCreator = (playing:IPlaying) => {\r\n    return {\r\n        type: types.SET_PLAYING_STATE,\r\n        playing\r\n    }\r\n}\r\n\r\nexport const setFullScreen : IActionCreator = (fullScreen:IFullScreen) => {\r\n    return {\r\n        type: types.SET_FULL_SCREEN,\r\n        fullScreen\r\n    }\r\n}\r\n\r\nexport const setPlaylist : IActionCreator = (playlist:IPlaylist) => {\r\n    return {\r\n        type: types.SET_PLAYLIST,\r\n        playlist\r\n    }\r\n}\r\n\r\nexport const setSequenceList : IActionCreator = (sequenceList:ISequenceList) => {\r\n    return {\r\n        type: types.SET_SEQUENCE_LIST,\r\n        sequenceList\r\n    }\r\n}\r\n\r\nexport const setPlayMode : IActionCreator = (mode:IMode) => {\r\n    return {\r\n        type: types.SET_PLAY_MODE,\r\n        mode\r\n    }\r\n}\r\n\r\nexport const setCurrentIndex : IActionCreator = (currentIndex:ICurrentIndex) => {\r\n    return {\r\n        type: types.SET_CURRENT_INDEX,\r\n        currentIndex\r\n    }\r\n}\r\n","export const playMode = {\n  sequence: 0,\n  loop: 1,\n  random: 2\n}\n","/**\r\n * Created by liaohuanyu on 2019/1/24.\r\n */\r\nexport function hasClass(el, className) {\r\n    let reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)')\r\n    return reg.test(el.className)\r\n}\r\n\r\nexport function addClass(el, className) {\r\n    if (hasClass(el, className)) {\r\n        return\r\n    }\r\n\r\n    let newClass = el.className.split(' ')\r\n    newClass.push(className)\r\n    el.className = newClass.join(' ')\r\n}\r\n\r\nexport function getData(el, name, val) {\r\n    const prefix = 'data-'\r\n    if (val) {\r\n        return el.setAttribute(prefix + name, val)\r\n    }\r\n    return el.getAttribute(prefix + name)\r\n}\r\n\r\nlet elementStyle = document.createElement('div').style\r\n\r\nlet vendor = (() => {\r\n    let transformNames = {\r\n        webkit: 'webkitTransform',\r\n        Moz: 'MozTransform',\r\n        O: 'OTransform',\r\n        ms: 'msTransform',\r\n        standard: 'transform'\r\n    }\r\n\r\n    for (let key in transformNames) {\r\n        if (elementStyle[transformNames[key]] !== undefined) {\r\n            return key\r\n        }\r\n    }\r\n\r\n    return false\r\n})()\r\n\r\nexport function prefixStyle(style) {\r\n    if (vendor === false) {\r\n        return false\r\n    }\r\n\r\n    if (vendor === 'standard') {\r\n        return style\r\n    }\r\n\r\n    return vendor + style.charAt(0).toUpperCase() + style.substr(1)\r\n}\r\n","import React, {Component} from 'react'\r\nimport './Header.scss'\r\nimport { Link } from 'react-router-dom'\r\n\r\nclass Header extends Component{\r\n    render() {\r\n        // console.log(\"Header render\")\r\n        return (\r\n            <div className=\"m-header\">\r\n                <div className=\"icon\"></div>\r\n                <h1 className=\"text\">React Music</h1>\r\n                <Link className=\"mine\" to=\"/user\">\r\n                    <i className=\"icon-mine\"/>\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header","import React,{ Component } from 'react'\r\nimport './Tab.scss'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nclass Tab extends Component{\r\n    render(){\r\n        return (\r\n            <div className=\"tab\">\r\n                <NavLink to=\"/recommend\" className=\"tab-item\" activeClassName=\"link-selected\">\r\n                    <span className=\"tab-link\">推荐</span>\r\n                </NavLink>\r\n                <NavLink to=\"/singer\" className=\"tab-item\" activeClassName=\"link-selected\">\r\n                    <span className=\"tab-link\">歌手</span>\r\n                </NavLink>\r\n                <NavLink to=\"/rank\" className=\"tab-item\" activeClassName=\"link-selected\">\r\n                     <span className=\"tab-link\">排行\r\n                </span>\r\n                </NavLink>\r\n                <NavLink to=\"/search\" className=\"tab-item\" activeClassName=\"link-selected\">\r\n                    <span className=\"tab-link\">搜索</span>\r\n                </NavLink>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Tab;","import './recommend.scss'\r\nimport React,{ Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport {  Route, withRouter } from 'react-router'\r\nimport {getRecommend, getDiscList} from 'api/recommend.js'\r\nimport {ERR_OK} from 'api/config'\r\nimport Carousel from 'reuse/carousel/Carousel'\r\nimport Scroll from 'reuse/scroll/Scroll'\r\nimport Loading from 'reuse/loading/Loading'\r\nimport LazyImage from 'reuse/lazyimg/Lazy-img'\r\nimport Disc from 'components/disc/Disc'\r\nimport { setDisc } from 'actions/disc'\r\nimport { IDisc } from 'store/stateTypes'\r\nimport { Dispatch } from 'redux';\r\n\r\n\r\ninterface Props{\r\n    setDisc:Function,\r\n    history:any,\r\n    location:any,\r\n    match:any\r\n}\r\n\r\ninterface State{\r\n    recommends: Array<any>,\r\n    discList:Array<IDisc>\r\n}\r\n\r\nlet cacheData:{\r\n    recommends: Array<any>,\r\n    discList:Array<IDisc>\r\n};\r\n\r\nclass Recommend extends Component<Props,State>{\r\n    unmoutedFlag:boolean;\r\n    constructor(props:Props){\r\n        super(props);\r\n        this.unmoutedFlag=false\r\n        this.state = {\r\n            recommends: [],\r\n            discList:[]\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        // console.log(\"Recommend的componentDidMount\")\r\n        if(cacheData){\r\n            console.log(\"cacheData\")\r\n            this.setState(\r\n                {\r\n                    recommends: cacheData.recommends,\r\n                    discList:cacheData.discList\r\n                }\r\n            )\r\n        }else{\r\n            this.getRecommend()\r\n            this.getDiscList()\r\n        }\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        cacheData = {\r\n            recommends:this.state.recommends,\r\n            discList:this.state.discList\r\n        }\r\n        this.unmoutedFlag=true\r\n    }\r\n\r\n    getRecommend() {\r\n        getRecommend().then((res) => {\r\n            if (res.code === ERR_OK && !this.unmoutedFlag) {\r\n                this.setState({\r\n                    recommends: res.data.slider\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    // async _getDiscList(){\r\n    //     const data = await getDiscList();\r\n    //     // console.log(data)\r\n    //     //这里应该用ts的类型判断来代替\r\n    //     if(data && !this.unmoutedFlag){\r\n    //         this.setState({\r\n    //             discList: data.list\r\n    //         })\r\n    //     }\r\n    // }\r\n\r\n    getDiscList(){\r\n        getDiscList().then((res) => {\r\n            if (res.code === ERR_OK && !this.unmoutedFlag) {\r\n                this.setState({\r\n                    discList: res.data.list\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    selectDisc = (disc:any) => {\r\n        this.props.history.push(`/recommend/${disc.dissid}`);\r\n        this.props.setDisc(disc)\r\n    }\r\n\r\n    render(){\r\n        // console.log(\"Recommend的render\")\r\n        const {recommends, discList} = this.state;\r\n        return(\r\n            <div className=\"recommend\">\r\n                    <Scroll className=\"recommend-content\">\r\n                        <div>\r\n                            <div className=\"slider-wrapper\">\r\n                                {\r\n                                    !!recommends.length &&\r\n                                    <Carousel>\r\n                                        {\r\n                                            recommends.map((item, index)=>(\r\n                                                    <div key={index}>\r\n                                                        <a href={item.linkUrl}>\r\n                                                            <img src={item.picUrl}/>\r\n                                                        </a>\r\n                                                    </div>\r\n                                                )\r\n                                            )\r\n                                        }\r\n                                    </Carousel>\r\n                                }\r\n                            </div>\r\n                            <div className=\"recommend-list\">\r\n                                <h1 className=\"list-title\">热门歌单推荐</h1>\r\n                                <ul>\r\n                                    {\r\n                                        !!discList.length && discList.map((item, index)=>(\r\n                                            <li className=\"item\" key={index} onClick={() => {this.selectDisc(item)}}>\r\n                                                <div className=\"icon\">\r\n                                                    <LazyImage\r\n                                                        className=\"discListLazy\"\r\n                                                        containerClassName=\"recommend\"\r\n                                                        sizes=\"200px\"\r\n                                                        src=\"https://placehold.it/200x300?text=Image1\"\r\n                                                        srcset={item.imgurl}\r\n                                                        width=\"60\"\r\n                                                        height=\"60\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"text\">\r\n                                                    <h2 className=\"name\">{item.creator.name}</h2>\r\n                                                    <p className=\"desc\">{item.dissname}</p>\r\n                                                </div>\r\n                                            </li>\r\n                                        ))\r\n                                    }\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        {\r\n                            !discList.length &&\r\n                            <div className=\"loading-container\" >\r\n                                <Loading/>\r\n                            </div>\r\n                        }\r\n                    </Scroll>\r\n                    <Route path=\"/recommend/:id\" component={Disc}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch:Dispatch) => {\r\n    return {\r\n        setDisc : (disc:IDisc) => {\r\n            dispatch(setDisc(disc))\r\n        }\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(() => ({}), mapDispatchToProps)(Recommend))","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n    setFullScreen,\r\n    setPlaying,\r\n    setCurrentIndex,\r\n    setPlayMode,\r\n    setPlaylist,\r\n    setSequenceList\r\n} from 'actions/player'\r\nimport ProgressBar from 'reuse/progress-bar/ProgressBar'\r\nimport ProgressCircle from 'reuse/progress-circle/ProgressCircle'\r\nimport Scroll from 'reuse/scroll/Scroll'\r\nimport {playMode} from 'common/js/config'\r\nimport {shuffle} from 'common/js/util'\r\nimport Lyric from 'lyric-parser'\r\nimport {prefixStyle} from 'common/js/dom'\r\nimport PlayList from 'components/playlist/PlayList'\r\n\r\nimport {\r\n    ISong ,\r\n    IPlaying,\r\n    ICurrentIndex,\r\n    IMode,\r\n    IPlaylist,\r\n    ISequenceList,\r\n    IFullScreen,\r\n    IStoreState\r\n} from 'store/stateTypes'\r\nimport { Dispatch } from 'redux'\r\n\r\nconst transform = prefixStyle('transform')\r\nconst transitionDuration = prefixStyle('transitionDuration')\r\n\r\nimport './player.scss'\r\n\r\n\r\ninterface PlayerPropType{\r\n    fullScreen : IFullScreen,\r\n    playlist : IPlaylist,\r\n    currentIndex : ICurrentIndex,\r\n    setFullScreen:Function,\r\n    setPlaying:Function,\r\n    setCurrentIndex:Function,\r\n    setPlayMode:Function,\r\n    setPlaylist:Function,\r\n    setSequenceList:Function,\r\n    playing:IPlaying,\r\n    mode:IMode,\r\n    sequenceList:ISequenceList\r\n}\r\n\r\ninterface PlayerStateType{\r\n    songReady:boolean,\r\n    currentTime:number,\r\n    currentSong:ISong,\r\n    radius:number,\r\n    currentLyric:any,\r\n    playingLyric:string,\r\n    currentLineNum:number,\r\n    currentShow:string\r\n}\r\n\r\nlet currentIndex:number;\r\nlet currentId:number;\r\n\r\nclass Player extends Component<PlayerPropType, PlayerStateType>{\r\n    static getDerivedStateFromProps(props:any){\r\n        const newId = props.playlist[props.currentIndex] && props.playlist[props.currentIndex].id;\r\n        if(newId !== currentId){\r\n            return {\r\n                songReady:false,\r\n                currentSong:props.playlist[props.currentIndex]\r\n            }\r\n        }\r\n        return {}\r\n    }\r\n    audio:React.RefObject<HTMLAudioElement>;\r\n    lyricList:React.RefObject<Scroll>;\r\n    lyricLine:React.RefObject<HTMLDivElement>;\r\n    middleL:React.RefObject<HTMLDivElement>;\r\n    playlist:React.RefObject<PlayList>;\r\n    touch:{\r\n        initiated:boolean,\r\n        startX:number,\r\n        startY:number,\r\n        percent:number\r\n    };\r\n    constructor(props: PlayerPropType){\r\n        super(props)\r\n        this.audio = React.createRef();\r\n        this.lyricList = React.createRef();\r\n        this.lyricLine = React.createRef();\r\n        this.middleL = React.createRef();\r\n        this.playlist = React.createRef();\r\n        this.touch = {\r\n            initiated:false,\r\n            startX:0,\r\n            startY:0,\r\n            percent:0\r\n        }\r\n        this.state ={\r\n            songReady: false,\r\n            currentTime:0,\r\n            currentSong: props.playlist[props.currentIndex],\r\n            radius:32,\r\n            currentLyric:null,\r\n            playingLyric:'',\r\n            currentLineNum:0,\r\n            currentShow:'cd'\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        // this.setState({\r\n        //     currentTime:this.audio.current.currentTime,\r\n        //     currentSong:this.props.playlist[this.props.currentIndex]\r\n        // })\r\n    }\r\n\r\n    getLyric = () => {\r\n        if(this.state.currentLyric){\r\n            this.state.currentLyric.stop()\r\n        }\r\n\r\n        this.state.currentSong.getLyric().then((lyric:string) => {\r\n            if (this.state.currentSong.lyric !== lyric) {\r\n                return\r\n            }\r\n            this.setState({\r\n                currentLyric:new Lyric(lyric, this.handleLyric)\r\n            },() => {\r\n                if (!this.props.playing) {\r\n                    this.state.currentLyric.play()\r\n                }\r\n                // console.log(this.state.currentLyric)\r\n            })\r\n        }).catch(() => {\r\n            this.setState({\r\n                currentLyric : null ,\r\n                playingLyric:'',\r\n                currentLineNum:0\r\n            })\r\n        })\r\n    }\r\n\r\n    handleLyric = ({lineNum, txt}:{lineNum:number, txt:string}) => {\r\n        // console.log(\"handleLyric run\")\r\n        // console.log(\"lineNum\",lineNum)\r\n        // console.log(\"txt\",txt)\r\n        if(!this.lyricList.current || !this.lyricLine.current)return\r\n        this.setState({\r\n            currentLineNum:lineNum,\r\n            playingLyric:txt\r\n        })\r\n        if (lineNum > 5) {\r\n            let lineEl = this.lyricLine.current.childNodes[lineNum - 5]\r\n            this.lyricList.current.scrollToElement(lineEl, 500)\r\n        } else {\r\n            this.lyricList.current.scrollTo(0, 0, 500)\r\n        }\r\n    }\r\n\r\n    back : React.MouseEventHandler<HTMLDivElement> = () => {\r\n        this.props.setFullScreen(false)\r\n    }\r\n\r\n    //播放\r\n    open : React.MouseEventHandler<HTMLDivElement>= () => {\r\n        this.props.setFullScreen(true)\r\n    }\r\n\r\n    prev : React.MouseEventHandler<HTMLElement>= () => {\r\n        if (!this.state.songReady) {\r\n            return\r\n        }\r\n        if (this.props.playlist.length === 1) {\r\n            this.loop()\r\n            return\r\n        } else {\r\n            let index = this.props.currentIndex - 1\r\n            if (index === -1) {\r\n                index = this.props.playlist.length - 1\r\n            }\r\n            this.props.setCurrentIndex(index)\r\n            if (!this.props.playing) {\r\n                this.togglePlaying()\r\n            }\r\n        }\r\n    }\r\n\r\n    next = () => {\r\n        if (!this.state.songReady) {\r\n            return\r\n        }\r\n        if (this.props.playlist.length === 1) {\r\n            // console.log(\"this.props.playlist.length === 1\")\r\n            this.loop()\r\n            return\r\n        } else {\r\n            let index = this.props.currentIndex + 1\r\n            if (index === this.props.playlist.length) {\r\n                index = 0\r\n            }\r\n            this.props.setCurrentIndex(index)\r\n            if (!this.props.playing) {\r\n                this.togglePlaying()\r\n            }\r\n        }\r\n    }\r\n\r\n    //时间\r\n    updateTime : React.ReactEventHandler<HTMLAudioElement>= (e) => {\r\n        const { currentTime } : { currentTime: number } = e.target as HTMLMediaElement;\r\n        this.setState({\r\n            currentTime : currentTime\r\n        })\r\n    }\r\n\r\n    format= (interval:number = 0) => {\r\n        //取整\r\n        interval = interval | 0\r\n        const minute = interval / 60 | 0\r\n        const second = this._pad(interval % 60)\r\n        return `${minute}:${second}`\r\n    }\r\n    _pad = (num:number, n:number = 2) =>{\r\n        let len = num.toString().length\r\n        let res = num + \"\";\r\n        while (len < n) {\r\n            res = '0' + res\r\n            len++\r\n        }\r\n        return res\r\n    }\r\n\r\n    percent = () => {\r\n        return this.state.currentTime / (this.state.currentSong && this.state.currentSong.duration)\r\n    }\r\n\r\n    //进度条\r\n    onProgressBarChange = (percent: number) => {\r\n        if(!this.audio.current){return}\r\n        const currentTime = this.state.currentSong.duration * percent\r\n        // console.log(\"this.audio.current\",this.audio.current.currentTime)\r\n        this.audio.current.currentTime = currentTime\r\n        if (this.props.playing) {\r\n            this.togglePlaying()\r\n        }\r\n        if (this.state.currentLyric) {\r\n            this.state.currentLyric.seek(currentTime * 1000)\r\n        }\r\n    }\r\n\r\n    //资源下载后自动播放\r\n    canPlayHandler : React.ReactEventHandler<HTMLAudioElement> = () => {\r\n        if(this.state.songReady){\r\n            return\r\n        }\r\n        // console.log(\"canPlayHandler\")\r\n        currentId = this.state.currentSong.id;\r\n        this.getLyric()\r\n        this.setState({\r\n            songReady: true\r\n        },()=>{\r\n            this.playHandler()\r\n        })\r\n    }\r\n\r\n    disableCls = () => {\r\n        return this.state.songReady ? '' : 'disable'\r\n    }\r\n\r\n    playHandler = () => {\r\n        if(!this.state.songReady || !this.audio.current){\r\n            return\r\n        }\r\n        const audio = this.audio.current;\r\n        if(this.props.playing){\r\n            audio.play()\r\n        }else{\r\n            audio.pause()\r\n        }\r\n        this.props.setPlaying(!this.props.playing)\r\n    }\r\n\r\n    togglePlaying  = () => {\r\n        this.playHandler()\r\n        if (this.state.currentLyric) {\r\n            this.state.currentLyric.togglePlay()\r\n        }\r\n    }\r\n\r\n    toggleMiniPlaying : React.MouseEventHandler<HTMLElement>= (e) => {\r\n        e.stopPropagation();\r\n        this.togglePlaying()\r\n    }\r\n\r\n    cdCls = () => {\r\n        return this.props.playing ? 'play pause':'play'\r\n    }\r\n\r\n    playIcon = () => {\r\n        return this.props.playing ? 'icon-play' : 'icon-pause'\r\n    }\r\n\r\n    miniIcon = () => {\r\n        return this.props.playing ? 'icon-play-mini':'icon-pause-mini'\r\n    }\r\n\r\n    //mode\r\n    changeMode = () => {\r\n        const mode = (this.props.mode + 1) % 3\r\n        this.props.setPlayMode(mode)\r\n        let list = null\r\n        if (mode === playMode.random) {\r\n            list = shuffle(this.props.sequenceList)\r\n        } else {\r\n            list = this.props.sequenceList\r\n        }\r\n        this.resetCurrentIndex(list)\r\n        this.props.setPlaylist(list)\r\n    }\r\n\r\n    resetCurrentIndex = (list:Array<any>)=> {\r\n        let index = list.findIndex((item) => {\r\n            return item.id === this.state.currentSong.id\r\n        })\r\n        this.props.setCurrentIndex(index)\r\n    }\r\n\r\n    iconMode = () => {\r\n        return this.props.mode === playMode.sequence ? 'icon-sequence' : this.props.mode === playMode.loop ? 'icon-loop' : 'icon-random'\r\n    }\r\n\r\n    end  = () => {\r\n        if(!this.audio.current)return\r\n        if (this.props.mode === playMode.loop) {\r\n            this.audio.current.play()\r\n            if (this.state.currentLyric) {\r\n                this.state.currentLyric.seek(0)\r\n            }\r\n        } else {\r\n            this.next()\r\n        }\r\n    }\r\n\r\n    loop = () => {\r\n        if(!this.audio.current)return\r\n        this.audio.current.currentTime = 0\r\n        this.playHandler()\r\n        if (this.state.currentLyric) {\r\n            this.state.currentLyric.seek(0)\r\n        }\r\n    }\r\n\r\n    middleTouchStart:React.TouchEventHandler<HTMLDivElement> = (e) => {\r\n        this.touch.initiated = true\r\n        const touch = e.touches[0]\r\n        this.touch.startX = touch.pageX\r\n        this.touch.startY = touch.pageY\r\n    }\r\n\r\n    middleTouchMove :React.TouchEventHandler<HTMLDivElement> = (e) => {\r\n        if (!this.touch.initiated || !this.lyricList.current || !this.middleL.current || !this.lyricList.current.wrapper.current) {\r\n            return\r\n        }\r\n        const touch = e.touches[0]\r\n        const deltaX = touch.pageX - this.touch.startX\r\n        const deltaY = touch.pageY - this.touch.startY\r\n        if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n            return\r\n        }\r\n        const left = this.state.currentShow === 'cd' ? 0 : - window.innerWidth\r\n        const offsetWidth = Math.min(0, Math.max(-window.innerWidth, left + deltaX))\r\n        this.touch.percent = Math.abs(offsetWidth / window.innerWidth)\r\n        this.lyricList.current.wrapper.current.style[transform] = `translate3d(${offsetWidth}px,0,0)`\r\n        this.lyricList.current.wrapper.current.style[transitionDuration] = '0'\r\n        this.middleL.current.style.opacity = 1 - this.touch.percent + \"\"\r\n        this.middleL.current.style[transitionDuration] = '0'\r\n    }\r\n\r\n    middleTouchEnd  = () => {\r\n        if (!this.lyricList.current || !this.middleL.current || !this.lyricList.current.wrapper.current) {\r\n            return\r\n        }\r\n        let offsetWidth\r\n        let opacity\r\n        if (this.state.currentShow === 'cd') {\r\n            if (this.touch.percent > 0.1) {\r\n                offsetWidth = -window.innerWidth\r\n                opacity = 0\r\n                this.setState({\r\n                    currentShow:'lyric'\r\n                })\r\n            } else {\r\n                offsetWidth = 0\r\n                opacity = 1\r\n            }\r\n        } else {\r\n            if (this.touch.percent < 0.9) {\r\n                offsetWidth = 0\r\n                this.setState({\r\n                    currentShow:'cd'\r\n                })\r\n                opacity = 1\r\n            } else {\r\n                offsetWidth = -window.innerWidth\r\n                opacity = 0\r\n            }\r\n        }\r\n        const time = 300\r\n        this.lyricList.current.wrapper.current.style[transform] = `translate3d(${offsetWidth}px,0,0)`\r\n        this.lyricList.current.wrapper.current.style[transitionDuration] = `${time}ms`\r\n        this.middleL.current.style.opacity = opacity + \"\"\r\n        this.middleL.current.style[transitionDuration] = `${time}ms`\r\n        this.touch.initiated = false\r\n    }\r\n\r\n    showPlaylist : React.MouseEventHandler<HTMLDivElement> = (e) => {\r\n        if(!this.playlist.current)return\r\n        e.stopPropagation();\r\n        this.playlist.current.show()\r\n    }\r\n\r\n    modeText = () => {\r\n        return this.props.mode === playMode.sequence ? '顺序播放' : this.props.mode === playMode.random ? '随机播放' : '单曲循环'\r\n    }\r\n\r\n    //playlist组件：歌曲列表删除，歌曲删除\r\n    deleteSongList = () => {\r\n        this.props.setCurrentIndex(-1)\r\n        this.props.setPlaylist([])\r\n        this.props.setSequenceList([])\r\n        this.props.setPlaying(false)\r\n    }\r\n\r\n    findIndex = (list:ISequenceList, song:ISong) => {\r\n        return list.findIndex((item) => {\r\n            return item.id === song.id\r\n        })\r\n    }\r\n\r\n    deleteSong = (song:ISong) => {\r\n        let playlist = this.props.playlist.slice()\r\n        let sequenceList = this.props.sequenceList.slice()\r\n        let currentIndex = this.props.currentIndex\r\n        let pIndex = this.findIndex(playlist, song)\r\n        playlist.splice(pIndex, 1)\r\n        let sIndex = this.findIndex(sequenceList, song)\r\n        sequenceList.splice(sIndex, 1)\r\n        if (currentIndex > pIndex || currentIndex === playlist.length) {\r\n            currentIndex--\r\n        }\r\n\r\n        this.props.setCurrentIndex(currentIndex)\r\n        this.props.setPlaylist(playlist)\r\n        this.props.setSequenceList(sequenceList)\r\n\r\n        if (!playlist.length) {\r\n            this.props.setPlaying(false)\r\n        } else {\r\n            this.props.setPlaying(true)\r\n        }\r\n    }\r\n\r\n    selectItem = (item:ISong, index:number) => {\r\n        if (this.props.mode === playMode.random) {\r\n            index = this.props.playlist.findIndex((song) => {\r\n                return song.id === item.id\r\n            })\r\n        }\r\n        this.props.setCurrentIndex(index)\r\n        this.props.setPlaying(true)\r\n    }\r\n\r\n    getCurrentIcon = (item:ISong) => {\r\n        if (this.state.currentSong && this.state.currentSong.id === item.id) {\r\n            return 'icon-play'\r\n        }\r\n        return ''\r\n    }\r\n\r\n    scrollToCurrent = (scroller:any, scrollSon:NodeList,current:ISong = this.state.currentSong) => {\r\n        const index = this.props.sequenceList.findIndex((song) => {\r\n            return current.id === song.id\r\n        })\r\n        scroller.scrollToElement(scrollSon[index], 300)\r\n    }\r\n\r\n    render(){\r\n        const { fullScreen, playlist } = this.props;\r\n        const { currentTime, currentSong, radius, currentLyric, currentLineNum, playingLyric, currentShow } = this.state\r\n        const styleDisplay = playlist.length ? 'block' : 'none';\r\n        return (\r\n            <div className=\"player\" style={{display: `${styleDisplay}`}}>\r\n                <div className=\"normal-player\" style={{display: `${fullScreen? 'block' : 'none'}`}}>\r\n                    <div className=\"background\">\r\n                        <img width=\"100%\" height=\"100%\" src={currentSong && currentSong.image}/>\r\n                    </div>\r\n                    <div className=\"top\">\r\n                        <div className=\"back\" onClick={this.back}>\r\n                            <i className=\"icon-back\"/>\r\n                        </div>\r\n                        <h1 className=\"title\" >{currentSong && currentSong.name}</h1>\r\n                        <h2 className=\"subtitle\">{currentSong && currentSong.singer}</h2>\r\n                    </div>\r\n                    <div className=\"middle\"\r\n                        onTouchStart={this.middleTouchStart}\r\n                         onTouchMove={this.middleTouchMove}\r\n                         onTouchEnd={this.middleTouchEnd}\r\n                    >\r\n                        <div className=\"middle-l\" ref={this.middleL}>\r\n                            <div className=\"cd-wrapper\">\r\n                                <div className={this.cdCls()+\" cd\"} >\r\n                                    <img className=\"image\" src={currentSong && currentSong.image}/>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"playing-lyric-wrapper\">\r\n                                <div className=\"playing-lyric\">{playingLyric}</div>\r\n                            </div>\r\n                        </div>\r\n                        <Scroll className=\"middle-r\" ref={this.lyricList} >\r\n                            <div className=\"lyric-wrapper\">\r\n                                {\r\n                                    currentLyric &&\r\n                                    <div ref={this.lyricLine}>\r\n                                        {\r\n                                            currentLyric.lines.map((line:{txt:string},index:number) => (\r\n                                                    <p className={\"text\" + (currentLineNum === index ? \" current\":\"\")}\r\n                                                       key={index}\r\n                                                    >\r\n                                                        {line.txt}\r\n                                                    </p>\r\n                                                )\r\n                                            )\r\n                                        }\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                        </Scroll>\r\n                    </div>\r\n                    <div className=\"bottom\">\r\n                        <div className=\"dot-wrapper\">\r\n                            <span className={\"dot\" + (currentShow === 'cd' ? \" active\": \"\")}/>\r\n                            <span className={\"dot\" + (currentShow === 'lyric' ? \" active\": \"\")}/>\r\n                        </div>\r\n                        <div className=\"progress-wrapper\">\r\n                            <span className=\"time time-l\">{this.format(currentTime)}</span>\r\n                            <div className=\"progress-bar-wrapper\">\r\n                                <ProgressBar percent={this.percent()} onProgressBarChange={this.onProgressBarChange}/>\r\n                            </div>\r\n                            <span className=\"time time-r\">{this.format(currentSong && currentSong.duration)}</span>\r\n                        </div>\r\n                        <div className=\"operators\">\r\n                            <div className=\"icon i-left\" onClick={this.changeMode}>\r\n                                <i className={this.iconMode()}/>\r\n                            </div>\r\n                            <div className = {this.disableCls()+\" icon i-left\"}>\r\n                                <i className=\"icon-prev\" onClick={this.prev}/>\r\n                            </div>\r\n                            <div className={this.disableCls()+\" icon i-center\"}>\r\n                                <i onClick={this.togglePlaying} className={this.playIcon()}/>\r\n                            </div>\r\n                            <div className={this.disableCls()+\" icon i-right\"}>\r\n                                <i className=\"icon-next\" onClick={this.next}/>\r\n                            </div>\r\n                            <div className={this.disableCls()+\" icon i-right\"}>\r\n                                <i className=\"icon-not-favorite\"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"mini-player\" style={{display: `${!fullScreen? 'flex' : 'none'}`}} onClick={this.open}>\r\n                    <div className=\"icon\">\r\n                        <img width=\"40\" height=\"40\" src={currentSong && currentSong.image} className={this.cdCls()}/>\r\n                    </div>\r\n                    <div className=\"text\">\r\n                        <h2 className=\"name\" >{currentSong && currentSong.name}</h2>\r\n                        <p className=\"desc\">{currentSong && currentSong.singer}</p>\r\n                    </div>\r\n                    <div className=\"control\" style={{position:\"relative\"}}>\r\n                        <ProgressCircle percent={this.percent()} radius={radius}>\r\n                            <i className= {this.miniIcon()+\" icon-mini\"} onClick={this.toggleMiniPlaying} />\r\n                        </ProgressCircle>\r\n                    </div>\r\n                    <div className=\"control\"\r\n                         onClick={this.showPlaylist}\r\n                    >\r\n                        <i className=\"icon-playlist\"/>\r\n                    </div>\r\n                </div>\r\n                <PlayList\r\n                    ref={this.playlist}\r\n                    changeMode={this.changeMode}\r\n                    iconMode={this.iconMode}\r\n                    modeText={this.modeText}\r\n                    deleteSongList={this.deleteSongList}\r\n                    deleteSong={this.deleteSong}\r\n                    sequenceList={this.props.sequenceList}\r\n                    getCurrentIcon={this.getCurrentIcon}\r\n                    selectItem={this.selectItem}\r\n                    scrollToCurrent={this.scrollToCurrent}\r\n                />\r\n                <audio\r\n                    ref={this.audio}\r\n                    src={currentSong && currentSong.url}\r\n                    onCanPlay={this.canPlayHandler}\r\n                    onTimeUpdate={this.updateTime}\r\n                    onEnded={this.end}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProp = (state:IStoreState) => ({\r\n    fullScreen : state.fullScreen,\r\n    playlist : state.playlist,\r\n    currentIndex : state.currentIndex,\r\n    playing:state.playing,\r\n    mode:state.mode,\r\n    sequenceList:state.sequenceList\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch:Dispatch) => ({\r\n    setFullScreen: (fullScreen: IFullScreen) => {\r\n        dispatch(setFullScreen(fullScreen))\r\n    },\r\n    setPlaying: (playing: IPlaying) => {\r\n        dispatch(setPlaying(playing))\r\n    },\r\n    setCurrentIndex: (index: ICurrentIndex) => {\r\n        dispatch(setCurrentIndex(index))\r\n    },\r\n    setPlayMode: (mode:IMode) => {\r\n        dispatch(setPlayMode(mode))\r\n    },\r\n    setPlaylist: (list:IPlaylist) => {\r\n        dispatch(setPlaylist(list))\r\n    },\r\n    setSequenceList: (list:ISequenceList) => {\r\n        dispatch(setSequenceList(list))\r\n    }\r\n})\r\n\r\nexport default connect(mapStateToProp, mapDispatchToProps)(Player)","import React,{ Component } from 'react'\r\nimport './carousel.scss'\r\nimport BScroll from 'better-scroll'\r\nimport {addClass} from 'common/js/dom.js'\r\n\r\ninterface componentsProps{\r\n    children: any\r\n}\r\n\r\ninterface componentsState{\r\n    loop:boolean ,\r\n    threshold:number ,\r\n    autoPlay:boolean ,\r\n    interval:number ,\r\n    showDot:boolean ,\r\n    click:boolean ,\r\n    speed:number,\r\n    currentPageIndex:number,\r\n    dots:Array<any>\r\n}\r\n\r\n// let resizeTimer:any=null;\r\n// let carouselBS:any = null;\r\n// let children:any = null;\r\n// let timer:any=null;\r\n\r\nexport default class Carousel extends Component<componentsProps, componentsState>{\r\n    carousel:React.RefObject<HTMLDivElement>;\r\n    carouselGroup:React.RefObject<HTMLDivElement>;\r\n    children:any;\r\n    resizeTimer:any;\r\n    carouselBS:any;\r\n    timer:any;\r\n    constructor(props:componentsProps){\r\n        super(props);\r\n        this.carousel = React.createRef();\r\n        this.carouselGroup = React.createRef();\r\n        this.resizeTimer=null;\r\n        this.carouselBS = null;\r\n        this.children = null;\r\n        this.timer=null;\r\n        this.state = {\r\n            loop:true,\r\n            autoPlay:true,\r\n            interval:4000,\r\n            showDot:true,\r\n            click:true,\r\n            threshold:0.3,\r\n            speed:400,\r\n            dots: [],\r\n            currentPageIndex: 0,\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        // console.log(\"Carouseld的componentDidMount\")\r\n        this.update();\r\n\r\n        window.addEventListener('resize', () => {\r\n            if (!this.carouselBS || !this.carouselBS.enabled) {\r\n                return\r\n            }\r\n            clearTimeout(this.resizeTimer)\r\n            this.resizeTimer = setTimeout(() => {\r\n                if (this.carouselBS.isInTransition) {\r\n                    this._onScrollEnd()\r\n                } else {\r\n                    if (this.state.autoPlay) {\r\n                        this._play()\r\n                    }\r\n                }\r\n                this.refresh()\r\n            }, 60)\r\n        })\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        clearTimeout(this.resizeTimer);\r\n        clearTimeout(this.timer);\r\n    }\r\n\r\n    update() {\r\n        if (this.carouselBS) {\r\n            this.carouselBS.destroy()\r\n        }\r\n        this.init()\r\n    }\r\n    init() {\r\n        clearTimeout(this.timer)\r\n        this.setState({\r\n            currentPageIndex: 0\r\n        })\r\n        this._setSlideWidth()\r\n        if (this.state.showDot) {\r\n            this._initDots()\r\n        }\r\n        this._initSlide()\r\n        if (this.state.autoPlay) {\r\n            this._play()\r\n        }\r\n    }\r\n    _initDots() {\r\n        this.setState({\r\n            dots: new Array(this.children.length).fill(0)\r\n        })\r\n    }\r\n    _initSlide() {\r\n        if(!this.carousel.current)return\r\n        this.carouselBS = new BScroll(this.carousel.current, {\r\n            scrollX: true,\r\n            scrollY: false,\r\n            momentum: false,\r\n            snap: {\r\n                loop: this.state.loop,\r\n                threshold: this.state.threshold,\r\n                speed: this.state.speed\r\n            },\r\n            bounce: false,\r\n            stopPropagation: true,\r\n            click: this.state.click\r\n        })\r\n        this.carouselBS.on('scrollEnd', this._onScrollEnd.bind(this))\r\n        this.carouselBS.on('touchEnd', () => {\r\n            if (this.state.autoPlay) {\r\n                this._play()\r\n            }\r\n        })\r\n        this.carouselBS.on('beforeScrollStart', () => {\r\n            if (this.state.autoPlay) {\r\n                clearTimeout(this.timer)\r\n            }\r\n        })\r\n    }\r\n    _setSlideWidth(isResize:boolean=false) {\r\n        if(!this.carouselGroup.current || !this.carousel.current)return\r\n        this.children = this.carouselGroup.current.children\r\n        // console.log(this.children.length,this.children[0])\r\n        let width = 0\r\n        let sliderWidth = this.carousel.current.clientWidth\r\n        // console.log(sliderWidth)\r\n        for (let i = 0; i < this.children.length; i++) {\r\n            let child = this.children[i]\r\n            addClass(child, 'carousel-item')\r\n\r\n            child.style.width = sliderWidth + 'px'\r\n            width += sliderWidth\r\n        }\r\n        if (this.state.loop && !isResize) {\r\n            width += 2 * sliderWidth\r\n        }\r\n        this.carouselGroup.current.style.width = width + 'px'\r\n    }\r\n    _play() {\r\n        clearTimeout(this.timer)\r\n        this.timer = setTimeout(() => {\r\n            this.carouselBS.next()\r\n        }, this.state.interval)\r\n    }\r\n    refresh() {\r\n        this._setSlideWidth(true)\r\n        this.carouselBS.refresh()\r\n    }\r\n    _onScrollEnd() {\r\n        let pageIndex = this.carouselBS.getCurrentPage().pageX;\r\n        // console.log(this)\r\n        this.setState({\r\n            currentPageIndex:pageIndex\r\n        })\r\n        if (this.state.autoPlay) {\r\n            this._play()\r\n        }\r\n    }\r\n    render(){\r\n        // console.log(\"Carouseld的render\")\r\n        const {dots , currentPageIndex} = this.state;\r\n        // console.log(dots.length,currentPageIndex)\r\n        // console.log(\"dot\"+ (currentPageIndex===1?\" active\":\"\"))\r\n        return (\r\n            <div className=\"carousel\" ref={this.carousel}>\r\n                <div className=\"carousel-group\" ref={this.carouselGroup}>\r\n                    {this.props.children}\r\n                </div>\r\n                <div className=\"dots\">\r\n                    {\r\n                        dots.length && dots.map((item, index)=>(\r\n                            <span className={\"dot\"+ (currentPageIndex===index?\" active\":\"\")} key={index}/>\r\n                            )\r\n                        )\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React,{ Component } from 'react'\r\nimport './Disc.scss'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport { getSongList } from 'api/recommend.js'\r\nimport { connect } from 'react-redux'\r\nimport {ERR_OK} from 'api/config'\r\nimport MusicList from 'components/music-list/MusicList'\r\nimport {createSong} from 'common/js/song.js'\r\nimport { withRouter } from 'react-router'\r\nimport { IDisc, ISong } from 'store/stateTypes'\r\n\r\ninterface DiscBaseStateType{\r\n    showMusicList: boolean,\r\n    songs:Array<ISong>\r\n}\r\n\r\ninterface DiscBasePropType{\r\n    disc:IDisc,\r\n    history:any\r\n}\r\n\r\n\r\nclass DiscBase extends Component<DiscBasePropType, DiscBaseStateType>{\r\n    unmoutedFlag:boolean;\r\n    // readonly state : Readonly<DiscBaseStateType>\r\n    constructor(props:DiscBasePropType){\r\n        super(props)\r\n        this.unmoutedFlag=false\r\n        this.state = {\r\n            showMusicList: true,\r\n            songs:[]\r\n        }\r\n    }\r\n\r\n    back = () => {\r\n        this.setState({\r\n            showMusicList:false\r\n        })\r\n    }\r\n\r\n    componentDidMount(){\r\n        this._getSongList()\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this.unmoutedFlag=true\r\n    }\r\n\r\n    _getSongList() {\r\n        if (!this.props.disc.dissid) {\r\n            this.props.history.push('/recommend')\r\n            return\r\n        }\r\n        getSongList(this.props.disc.dissid).then((res) => {\r\n            if (res.code === ERR_OK && !this.unmoutedFlag) {\r\n                this.setState({\r\n                    songs:this._normalizeSongs(res.cdlist[0].songlist)\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    _normalizeSongs = (list:Array<any>) => {\r\n        let ret:any= []\r\n        list.forEach((item) => {\r\n            let musicData = item\r\n            if (musicData.songid && musicData.albummid) {\r\n                ret.push(createSong(musicData))\r\n            }\r\n        })\r\n        return ret\r\n    }\r\n\r\n\r\n    render(){\r\n        const { disc } = this.props;\r\n        const { songs } = this.state;\r\n        return(\r\n            <CSSTransition\r\n                in={this.state.showMusicList}\r\n                timeout={500}\r\n                classNames=\"disc-transition\"\r\n                appear={true}\r\n                unmountOnExit\r\n                onExited = { () => {\r\n                    this.props.history.goBack()\r\n                } }\r\n            >\r\n                <MusicList singerName={disc.dissname} bgImage={disc.imgurl} songs={songs} back={this.back}/>\r\n            </CSSTransition>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state:{disc:IDisc},ownProps:any) => (\r\n    {\r\n        disc:state.disc,\r\n        ...ownProps\r\n    }\r\n)\r\n\r\nconst Disc = withRouter(connect(mapStateToProps)(DiscBase));\r\n\r\nexport default Disc","import {jsonp, ws} from 'common/js/ws'\nimport {commonParams, options} from './config'\nimport axios from 'axios'\n\nexport function getRecommend() {\n  const url = 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg'\n\n  const data = Object.assign({}, commonParams, {\n    platform: 'h5',\n    uin: 0,\n    needNewCode: 1\n  })\n\n  return jsonp(url, data, options)\n}\n\nexport function getDiscList() {\n    const url = '/api/getDiscList'\n\n    const data = Object.assign({}, commonParams, {\n        picmid: 1,\n        rnd: 0.05723217189877294,\n        g_tk: 5381,\n        loginUin: 0,\n        hostUin: 0,\n        format: 'json',\n        inCharset: 'utf8',\n        outCharset: 'utf-8',\n        notice: 0,\n        platform: 'yqq.json',\n        needNewCode: 0,\n        categoryId: 10000000,\n        sortId: 5,\n        sin: 0,\n        ein: 29\n    })\n\n    return axios.get(url, {\n        params: data\n    }).then((res) => {\n        return Promise.resolve(res.data)\n    })\n}\n\n// export function getDiscList() {\n//   const url = '/api/getDiscList'\n//\n//   const data = Object.assign({}, commonParams, {\n//     picmid: 1,\n//     rnd: 0.05723217189877294,\n//     g_tk: 5381,\n//     loginUin: 0,\n//     hostUin: 0,\n//     format: 'json',\n//     inCharset: 'utf8',\n//     outCharset: 'utf-8',\n//     notice: 0,\n//     platform: 'yqq.json',\n//     needNewCode: 0,\n//     categoryId: 10000000,\n//     sortId: 5,\n//     sin: 0,\n//     ein: 29\n//   })\n//\n//   const options = {\n//       url,\n//       headers:{\n//           referer: 'https://c.y.qq.com/',\n//           host: 'c.y.qq.com'\n//       },\n//       data\n//   };\n//   return ws('GET',options);\n// }\n\n\nexport function getSongList(disstid) {\n  const url = '/api/getSongList'\n  const data = Object.assign({}, commonParams, {\n    type: 1,\n    json: 1,\n    utf8: 1,\n    onlysong: 0,\n    disstid,\n    g_tk: 5381,\n    loginUin: 0,\n    hostUin: 0,\n    format: 'json',\n    inCharset: 'utf8',\n    outCharset: 'utf-8',\n    notice: 0,\n    platform: 'yqq.json',\n    needNewCode: 0\n  })\n\n  return axios.get(url, {\n    params: data\n  }).then((res) => {\n    return Promise.resolve(res.data)\n  })\n}\n","import * as types from './actionsTypes'\r\nimport { IDisc, IActionCreator } from 'store/stateTypes'\r\n\r\nexport const setDisc : IActionCreator= (disc:IDisc) => {\r\n    return {\r\n        type: types.SET_DISC,\r\n        disc\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport {prefixStyle} from 'common/js/dom'\r\nimport './ProgressBar.scss'\r\n\r\nconst progressBtnWidth = 16\r\nconst transform = prefixStyle('transform')\r\n\r\ninterface ProgressBarPropType{\r\n    percent:number,\r\n    onProgressBarChange:Function\r\n}\r\n\r\ninterface ProgressBarStateType{\r\n\r\n}\r\n\r\nclass ProgressBar extends Component<ProgressBarPropType, ProgressBarStateType>{\r\n    progressBar : React.RefObject<HTMLDivElement>;\r\n    progress:React.RefObject<HTMLDivElement>;\r\n    progressBtn:React.RefObject<HTMLDivElement>;\r\n    touch:{\r\n        initiated:boolean,\r\n        startX:number,\r\n        left:number\r\n    };\r\n    constructor(props:ProgressBarPropType){\r\n        super(props)\r\n        this.progressBar = React.createRef();\r\n        this.progress = React.createRef();\r\n        this.progressBtn = React.createRef();\r\n        this.touch = {\r\n            initiated:false,\r\n            startX:0,\r\n            left:0\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        this.percent(this.props.percent)\r\n    }\r\n\r\n    progressClick = (e:any) => {\r\n        if(!this.progressBar.current)return\r\n        const rect = this.progressBar.current.getBoundingClientRect()\r\n        const offsetWidth = e.pageX - rect.left\r\n        this._offset(offsetWidth)\r\n        // 这里当我们点击 progressBtn 的时候，e.offsetX 获取不对\r\n        // this._offset(e.offsetX)\r\n        this._triggerPercent()\r\n    }\r\n\r\n    progressTouchStart = (e:any)=> {\r\n        if(!this.progress.current)return\r\n        e.preventDefault();\r\n        this.touch.initiated = true\r\n        this.touch.startX = e.touches[0].pageX\r\n        this.touch.left = this.progress.current.clientWidth\r\n    }\r\n\r\n    progressTouchMove= (e:any)=> {\r\n        if(!this.progressBar.current)return\r\n        e.preventDefault();\r\n        if (!this.touch.initiated) {\r\n            return\r\n        }\r\n        const deltaX = e.touches[0].pageX - this.touch.startX\r\n        const offsetWidth = Math.min(this.progressBar.current.clientWidth - progressBtnWidth, Math.max(0, this.touch.left + deltaX))\r\n        this._offset(offsetWidth)\r\n    }\r\n\r\n    progressTouchEnd= (e:any)=> {\r\n        e.preventDefault();\r\n        this.touch.initiated = false\r\n        this._triggerPercent()\r\n    }\r\n\r\n    _triggerPercent= ()=> {\r\n        if(!this.progressBar.current || !this.progress.current)return\r\n        const barWidth = this.progressBar.current.clientWidth - progressBtnWidth\r\n        const percent = this.progress.current.clientWidth / barWidth\r\n        this.props.onProgressBarChange(percent)\r\n    }\r\n\r\n    _offset= (offsetWidth:number)=> {\r\n        if(!this.progressBtn.current || !this.progress.current)return\r\n        this.progress.current.style.width = `${offsetWidth}px`\r\n        this.progressBtn.current.style[transform] = `translate3d(${offsetWidth}px,0,0)`\r\n    }\r\n\r\n    percent = (percent: number) => {\r\n        if(!this.progressBar.current )return\r\n        if (percent >= 0 && !this.touch.initiated) {\r\n            const barWidth = this.progressBar.current.clientWidth - progressBtnWidth\r\n            const offsetWidth = percent * barWidth\r\n            this._offset(offsetWidth)\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"progress-bar\" ref={this.progressBar} onClick={this.progressClick}>\r\n                <div className=\"bar-inner\">\r\n                    <div className=\"progress\" ref={this.progress}></div>\r\n                    <div className=\"progress-btn-wrapper\" ref={this.progressBtn}\r\n                        onTouchStart={this.progressTouchStart}\r\n                         onTouchMove={this.progressTouchMove}\r\n                         onTouchEnd={this.progressTouchEnd}\r\n                    >\r\n                        <div className=\"progress-btn\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProgressBar","import React, {Component, ReactNode} from 'react'\r\nimport './ProgressCircle.scss'\r\n\r\ninterface ProgressCirclePropType{\r\n    percent:number,\r\n    radius:number,\r\n    children:ReactNode\r\n}\r\n\r\ninterface ProgressCircleStateType{\r\n    dashArray:number\r\n}\r\n\r\nclass ProgressCircle extends Component<ProgressCirclePropType, ProgressCircleStateType>{\r\n    constructor(props:ProgressCirclePropType){\r\n        super(props)\r\n        this.state = {\r\n            dashArray: Math.PI * 100\r\n        }\r\n    }\r\n\r\n    dashOffset= ()=> {\r\n        if(Object.is(this.props.percent,NaN)){\r\n            return\r\n        }\r\n        return (1 - this.props.percent) * this.state.dashArray\r\n    }\r\n\r\n    render(){\r\n        const radius = this.props.radius || 100;\r\n        const {dashArray} = this.state;\r\n        return (\r\n            <div className=\"progress-circle\">\r\n                <svg width={radius} height={radius} viewBox=\"0 0 100 100\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <circle className=\"progress-background\" r=\"50\" cx=\"50\" cy=\"50\" fill=\"transparent\"/>\r\n                <circle className=\"progress-bar\" r=\"50\" cx=\"50\" cy=\"50\" fill=\"transparent\" strokeDasharray={dashArray}\r\n              strokeDashoffset={this.dashOffset()}/>\r\n                </svg>\r\n                {\r\n                    this.props.children\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProgressCircle","import React,{ Component } from 'react'\r\nimport './PlayList.scss'\r\nimport Scroll from 'reuse/scroll/Scroll'\r\nimport Confirm from 'reuse/confirm/Confirm'\r\n\r\nimport {\r\n    ISequenceList\r\n} from 'store/stateTypes'\r\n\r\ninterface PlayListProps{\r\n    changeMode:Function,\r\n    iconMode:Function,\r\n    modeText:Function,\r\n    deleteSongList:Function,\r\n    sequenceList:ISequenceList,\r\n    deleteSong:Function,\r\n    getCurrentIcon:Function,\r\n    selectItem:Function,\r\n    scrollToCurrent:Function\r\n}\r\n\r\ninterface PlayListState{\r\n    showFlag:boolean\r\n}\r\n\r\nclass PlayList extends Component<PlayListProps,PlayListState>{\r\n    confirm:React.RefObject<Confirm>;\r\n    listContent:React.RefObject<Scroll>;\r\n    scrollSon:React.RefObject<HTMLUListElement>;\r\n    constructor(props:PlayListProps){\r\n        super(props);\r\n        this.confirm = React.createRef()\r\n        this.listContent = React.createRef()\r\n        this.scrollSon = React.createRef()\r\n        this.state={\r\n            showFlag:false\r\n        }\r\n    }\r\n\r\n    show = () => {\r\n        this.setState(\r\n            {\r\n                showFlag:true\r\n            },()=>{\r\n                if(!this.listContent.current || !this.scrollSon.current)return\r\n                this.listContent.current.refresh()\r\n                this.props.scrollToCurrent(\r\n                    this.listContent.current,\r\n                    this.scrollSon.current.childNodes\r\n                )\r\n            }\r\n        )\r\n    }\r\n\r\n    hide = () => {\r\n        this.setState(\r\n            {\r\n                showFlag:false\r\n            }\r\n        )\r\n    }\r\n\r\n    showConfirm = () => {\r\n        if(!this.confirm.current)return\r\n        this.confirm.current.show()\r\n    }\r\n\r\n    render(){\r\n        const { showFlag } = this.state\r\n        const {\r\n            iconMode,\r\n            changeMode,\r\n            modeText,\r\n            deleteSongList,\r\n            sequenceList,\r\n            getCurrentIcon,\r\n            selectItem,\r\n            deleteSong } = this.props\r\n        return(\r\n            <div className=\"playlist\" style={{display:showFlag?\"\":\"none\"}}>\r\n                <div className=\"list-wrapper\">\r\n                    <div className=\"list-header\">\r\n                        <h1 className=\"title\">\r\n                            <i className={'icon '+iconMode()}\r\n                                onClick={()=>{changeMode()}}\r\n                            />\r\n                            <span className=\"text\">{modeText()}</span>\r\n                            <span className=\"clear\" onClick={this.showConfirm}><i className=\"icon-clear\"/></span>\r\n                        </h1>\r\n                    </div>\r\n                    <Scroll className=\"list-content\" ref={this.listContent}>\r\n                        <ul ref={this.scrollSon}>\r\n                            {\r\n                                !!sequenceList.length && sequenceList.map((item, index)=>(\r\n                                    <li\r\n                                        className=\"item\"\r\n                                        key={index}\r\n                                        onClick={()=>{selectItem(item,index)}}\r\n                                    >\r\n                                        <i className={\"current \"+ getCurrentIcon(item)} />\r\n                                        <span className=\"text\">{item.name}</span>\r\n                                        <span className=\"like\">\r\n                                            <i className=\"icon-not-favorite\"/>\r\n                                         </span>\r\n                                        <span className=\"delete\"\r\n                                              onClick={(e)=>{\r\n                                                  e.stopPropagation()\r\n                                                  deleteSong(item)\r\n                                              }}>\r\n                                            <i className=\"icon-delete\"/>\r\n                                        </span>\r\n                                    </li>\r\n                                ))\r\n                            }\r\n                        </ul>\r\n                    </Scroll>\r\n                    <div className=\"list-operate\">\r\n                        <div className=\"add\">\r\n                        <i className=\"icon-add\"/>\r\n                        <span className=\"text\">添加歌曲到队列</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"list-close\" onClick={this.hide}>\r\n                        <span>关闭</span>\r\n                    </div>\r\n                </div>\r\n                {/*@confirm=\"confirmClear\"*/}\r\n                <Confirm\r\n                    ref={this.confirm}\r\n                    text=\"是否清空播放列表\"\r\n                    confirmBtnText=\"清空\"\r\n                    confirmHandler={deleteSongList}\r\n                />\r\n                {/*<add-song ref=\"addSong\"/>*/}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PlayList","import React, { Component } from 'react'\r\nimport { Switch, Route, Redirect } from 'react-router'\r\n\r\nimport Header from 'components/header/Header'\r\nimport Tab from 'components/tab/Tab'\r\nimport Recommend from 'components/recommend/Recommend'\r\nimport Player from 'components/player/Player'\r\n// import UserCenter from \"components/user-center/UserCenter\";\r\n// import Search from 'components/search/Search'\r\n// import Singer from 'components/singer/Singer'\r\n// import Rank from 'components/rank/Rank'\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n          <Header />\r\n          <Tab />\r\n          <Switch>\r\n              {/*配置默认路由*/}\r\n              <Route\r\n                  exact\r\n                  path=\"/\"\r\n                  render={() => <Redirect to=\"/recommend\" />}\r\n              />\r\n              <Route path=\"/recommend\" component={Recommend}/>\r\n              <Route path=\"/rank\" component={Rank}/>\r\n              <Route path=\"/search\" component={Search}/>\r\n              <Route path=\"/singer\" component={Singer}/>\r\n          </Switch>\r\n          <Route path=\"/user\" component={UserCenter}/>\r\n          <Player/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\nimport Loadable from 'react-loadable';\r\nimport Loading from 'reuse/loading/Loading';\r\nconst Rank = Loadable({\r\n        loader: () => {return import(/* webpackChunkName: \"Rank\" */ 'components/rank/Rank')},\r\n        loading: () => <Loading text={\"按需加载\"}/>\r\n    });\r\n\r\nconst Search = Loadable({\r\n        loader: () => {return import(/* webpackChunkName: \"Search\" */ 'components/search/Search')},\r\n        loading: () => <Loading text={\"按需加载\"}/>\r\n});\r\n\r\nconst Singer = Loadable({\r\n        loader: () => {return import(/* webpackChunkName: \"Singer\" */ 'components/singer/Singer')},\r\n        loading: () => <Loading text={\"按需加载\"}/>\r\n});\r\n\r\nconst UserCenter = Loadable({\r\n        loader: () => {return import(/* webpackChunkName: \"UserCenter\" */ 'components/user-center/UserCenter')},\r\n        loading: () => <Loading text={\"按需加载\"}/>\r\n});","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","enum playMode {\r\n    sequence = 0,\r\n    loop = 1,\r\n    random = 2\r\n}\r\n\r\nexport type IDisc = {\r\n    commit_time : string\r\n    createtime : string\r\n    creator : any\r\n    dissid : string\r\n    dissname : string\r\n    imgurl : string\r\n    introduction : string\r\n    listennum : number\r\n    score : number\r\n    version : number\r\n}\r\n\r\nexport type ICurrentIndex = number\r\n\r\nexport type IFullScreen = boolean\r\n\r\nexport type IMode = playMode\r\n\r\nexport type IPlaying = boolean\r\n\r\nexport type ISong = {\r\n    id : number\r\n    mid : string\r\n    singer: string\r\n    name : string\r\n    album : string\r\n    duration : number\r\n    image : string\r\n    url : string\r\n    getLyric : Function\r\n    lyric : string\r\n}\r\n\r\nexport type IPlaylist = Array<ISong>\r\n\r\nexport type ISearchHistory = Array<string>\r\n\r\nexport type ISequenceList = Array<ISong>\r\n\r\nexport type ISinger = {\r\n    id : number\r\n    name : string\r\n    avatar : string\r\n}\r\n\r\nexport type ISongListItem = {\r\n    singername : string\r\n    songname : string\r\n}\r\n\r\nexport type ITopList = {\r\n    id : number\r\n    listenCount : number\r\n    picUrl : string\r\n    songList : Array<ISongListItem>\r\n    topTitle : string\r\n    type : number\r\n}\r\n\r\n// ******** store state ********* //\r\n\r\nexport type IStoreState = {\r\n    currentIndex: ICurrentIndex\r\n    disc: IDisc\r\n    fullScreen : IFullScreen\r\n    mode : IMode\r\n    playing : IPlaying\r\n    playlist : IPlaylist\r\n    searchHistory : ISearchHistory\r\n    sequenceList : ISequenceList\r\n    singer : ISinger\r\n    topList : ITopList\r\n}\r\n\r\n\r\n// ******** action ********* //\r\nexport type IAction = {\r\n    readonly type: string\r\n    [propName: string]: any\r\n}\r\n\r\nexport type IActionCreator = (param: any) => IAction\r\n\r\n// ******** reducer ********* //\r\n\r\nexport type IReducer = (state: IStoreState, action: IAction) => IStoreState\r\n\r\n\r\n\r\n// ******** defaultState ********* //\r\nimport { loadSearch } from 'common/js/cache'\r\n\r\nexport const defaultState: IStoreState = {\r\n    currentIndex: -1,\r\n    disc: {\r\n        commit_time : '',\r\n        createtime : '',\r\n        creator : {},\r\n        dissid : '',\r\n        dissname : '',\r\n        imgurl : '',\r\n        introduction : '',\r\n        listennum : -1,\r\n        score : -1,\r\n        version : -1\r\n    },\r\n    fullScreen : false,\r\n    mode : playMode.sequence,\r\n    playing : false,\r\n    playlist : [],\r\n    searchHistory : loadSearch(),\r\n    sequenceList : [],\r\n    singer : {\r\n        id : -1,\r\n        name : '',\r\n        avatar : ''\r\n    },\r\n    topList : {\r\n        id : -1,\r\n        listenCount : -1,\r\n        picUrl : '',\r\n        songList : [],\r\n        topTitle : '',\r\n        type : -1\r\n    }\r\n}\r\n\r\n\r\n","import {createStore, applyMiddleware} from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { createLogger } from 'redux-logger';\r\nimport reducer from 'reducers/index'\r\nconst loggerMiddleware = createLogger();\r\n\r\nlet createStoreWithMiddleware:any;\r\nif (process.env.NODE_ENV === 'development') {\r\n    createStoreWithMiddleware = applyMiddleware(\r\n        thunkMiddleware,\r\n        loggerMiddleware\r\n    )(createStore);\r\n} else {\r\n    createStoreWithMiddleware = applyMiddleware(\r\n        thunkMiddleware\r\n    )(createStore);\r\n}\r\n\r\nexport default function configureStore(initialState?:any) {\r\n    return createStoreWithMiddleware(reducer, initialState);\r\n}\r\n\r\n","import * as types from 'actions/actionsTypes'\r\nimport {\r\n    ISinger,\r\n    defaultState,\r\n    IAction\r\n} from 'store/stateTypes'\r\n\r\nconst singer = (state:ISinger=defaultState.singer, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_SINGER:\r\n            return action.singer\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default singer","import * as types from 'actions/actionsTypes'\r\nimport { IDisc, defaultState, IAction } from 'store/stateTypes'\r\n\r\nconst disc = (state:IDisc=defaultState.disc, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_DISC:\r\n            return action.disc\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default disc","import * as types from 'actions/actionsTypes'\r\nimport {\r\n    ITopList,\r\n    defaultState,\r\n    IAction\r\n} from 'store/stateTypes'\r\n\r\nconst topList = (state:ITopList=defaultState.topList, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_TOP_LIST:\r\n            return action.topList\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default topList","import * as types from 'actions/actionsTypes'\r\nimport {\r\n    ISearchHistory,\r\n    defaultState,\r\n    IAction\r\n} from 'store/stateTypes'\r\n\r\nconst searchHistory = (state:ISearchHistory = defaultState.searchHistory, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_SEARCH_HISTORY:\r\n            return action.searchHistory\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default searchHistory","import { combineReducers } from \"redux\";\r\nimport singer from './singer'\r\nimport * as player from './player'\r\nimport disc from './disc'\r\nimport topList from './rank'\r\nimport searchHistory from './search'\r\n\r\nconst reducer = combineReducers({\r\n    singer:singer,\r\n    playing:player.playing,\r\n    fullScreen:player.fullScreen,\r\n    playlist:player.playlist,\r\n    sequenceList:player.sequenceList,\r\n    mode:player.mode,\r\n    currentIndex:player.currentIndex,\r\n    disc: disc,\r\n    topList:topList,\r\n    searchHistory:searchHistory\r\n})\r\n\r\nexport default reducer","import * as types from 'actions/actionsTypes'\r\nimport {\r\n    IPlaying,\r\n    IFullScreen,\r\n    IPlaylist,\r\n    ISequenceList,\r\n    IMode,\r\n    ICurrentIndex,\r\n    defaultState,\r\n    IAction\r\n}\r\nfrom 'store/stateTypes'\r\n\r\nexport const playing = (state:IPlaying = defaultState.playing, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_PLAYING_STATE:\r\n            return action.playing\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const fullScreen = (state:IFullScreen = defaultState.fullScreen, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_FULL_SCREEN:\r\n            return action.fullScreen\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const playlist = (state:IPlaylist = defaultState.playlist, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_PLAYLIST:\r\n            return action.playlist\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const sequenceList = (state:ISequenceList = defaultState.sequenceList, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_SEQUENCE_LIST:\r\n            return action.sequenceList\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const mode = (state:IMode = defaultState.mode, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_PLAY_MODE:\r\n            return action.mode\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const currentIndex = (state:ICurrentIndex = defaultState.currentIndex, action:IAction) => {\r\n    switch(action.type){\r\n        case types.SET_CURRENT_INDEX:\r\n            return action.currentIndex\r\n        default:\r\n            return state\r\n    }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './common/style/index.scss';\nimport App from './app/App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from \"react-redux\";\nimport configureStore from \"store/store\"\n\n// const FastClick = require('fastclick');\n// FastClick.attach(document.body);\n\nimport fastClick from 'fastclick';\nfastClick.attach(document.body);\n\nimport { BrowserRouter } from 'react-router-dom'\n\nconst store = configureStore()\n\nReactDOM.render(\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/**\r\n * @Description: 输入数据： loadingProps\r\n * @author: liaohuanyu\r\n * @date 2019/2/19\r\n*/\r\nimport React, {Component} from 'react'\r\nimport './loading.scss'\r\nimport loadingGif from './loading.gif';\r\n\r\ninterface loadingProps{\r\n    text?:string\r\n}\r\n\r\n//无状态组件的类型检查,类型type SFC<P>已经有预定义的children和其他（defaultProps、displayName等等…）\r\n// 所以不用每次都自己在编写props中定义children?: ReactNode 以及其他的属性类型\r\nconst Loading : React.SFC<loadingProps> = ({text = \"正在载入...\"}) => (\r\n    <div className=\"loading\">\r\n        <img width=\"24\" height=\"24\" src={loadingGif}/>\r\n        <p className=\"desc\">{text}</p>\r\n    </div>\r\n)\r\n\r\nexport default Loading\r\n","/**\r\n * @Description: 使用组件Scroll的时候，可以当做正常标签使用，className依然表示class\r\n *                  scrollHandler获取滑动位置\r\n * @author: liaohuanyu\r\n * @date 2019/2/1\r\n*/\r\nimport React, {Component, ReactNode} from 'react'\r\nimport BScroll from 'better-scroll'\r\n\r\ninterface scrollProps{\r\n    children?:ReactNode,\r\n    className?:string,\r\n    scrollHandler?:Function,\r\n    probeType?:number,\r\n    pullUp?:boolean,\r\n    pullUpHandler?:Function\r\n}\r\n\r\ninterface scrollState{\r\n    click:boolean,\r\n    probeType:number,\r\n    listenScroll:boolean\r\n}\r\n\r\nexport default class Scroll extends Component<scrollProps, scrollState>{\r\n    wrapper:React.RefObject<HTMLDivElement>;\r\n    wrapperBs:any;\r\n    constructor(props: scrollProps){\r\n        super(props);\r\n        this.wrapper = React.createRef();\r\n        this.wrapperBs = null;\r\n        this.scrollTo = this.scrollTo.bind(this);\r\n        this.scrollToElement = this.scrollToElement.bind(this);\r\n        this.state = {\r\n            click:true,\r\n            listenScroll:true,\r\n            probeType: props.probeType || 2\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        setTimeout(() => {\r\n            // console.log(1)\r\n            this._initScroll()\r\n        }, 20)\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this.stop()\r\n    }\r\n\r\n    _initScroll = ()=> {\r\n        if (!this.wrapper.current) {\r\n            return\r\n        }\r\n        this.wrapperBs = new BScroll(this.wrapper.current, {\r\n            probeType: this.state.probeType,\r\n            click: this.state.click\r\n        })\r\n        let {scrollHandler,pullUpHandler} = this.props;\r\n        // console.log(this.wrapperBs)\r\n        if (this.state.listenScroll) {\r\n            this.wrapperBs.on('scroll', (pos:Object) => {\r\n                scrollHandler && scrollHandler(pos)\r\n            })\r\n        }\r\n\r\n        if (this.state.listenScroll) {\r\n            this.wrapperBs.on('scrollEnd', (pos:Object) => {\r\n                scrollHandler && scrollHandler(pos)\r\n            })\r\n        }\r\n\r\n        if (this.props.pullUp) {\r\n            this.wrapperBs.on('scrollEnd', () => {\r\n                if (this.wrapperBs.y <= (this.wrapperBs.maxScrollY + 50)) {\r\n                    pullUpHandler && pullUpHandler()\r\n                }\r\n            })\r\n        }\r\n\r\n        // if (this.state.beforeScroll) {\r\n        //     this.wrapperBs.on('beforeScrollStart', () => {\r\n        //         this.$emit('beforeScroll')\r\n        //     })\r\n        // }\r\n    }\r\n    stop = () =>{\r\n        this.wrapperBs && this.wrapperBs.stop()\r\n    }\r\n    refresh = () => {\r\n        this.wrapperBs && this.wrapperBs.refresh()\r\n    }\r\n    scrollTo(...args:any){\r\n        this.wrapperBs && this.wrapperBs.scrollTo.apply(this.wrapperBs, args)\r\n    }\r\n    scrollToElement(...args:any){\r\n        this.wrapperBs && this.wrapperBs.scrollToElement.apply(this.wrapperBs, args)\r\n    }\r\n    render(){\r\n        return (\r\n            <div ref={this.wrapper} className={this.props.className}>\r\n                {this.props.children}\r\n            </div>\r\n        )\r\n    }\r\n}","/**\n * @Description: shuffle：数组洗牌\n * @author: liaohuanyu\n * @date 2019/2/11\n*/\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\nexport function shuffle(arr) {\n  let _arr = arr.slice()\n  for (let i = 0; i < _arr.length; i++) {\n    let j = getRandomInt(0, i)\n    let t = _arr[i]\n    _arr[i] = _arr[j]\n    _arr[j] = t\n  }\n  return _arr\n}\n\nexport function reactDebounce(func, wait=500) {\n    let timeout;  // 定时器变量\n    return function(event){\n        clearTimeout(timeout);  // 每次触发时先清除上一次的定时器,然后重新计时\n        event.persist && event.persist()   //保留对事件的引用\n        //const event = e && {...e}   //深拷贝事件对象\n        timeout = setTimeout(()=>{\n            func(event)\n        }, wait);  // 指定 xx ms 后触发真正想进行的操作 handler\n    };\n}\n\nexport function debounce(func, delay) {\n  let timer\n\n  return function (...args) {\n    if (timer) {\n      clearTimeout(timer)\n    }\n    timer = setTimeout(() => {\n      func.apply(this, args)\n    }, delay)\n  }\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABACAMAAABxwuT6AAAAWlBMVEVHcEwypLE3kZpciI2tsLDT1NREvcwBAgICBQUGDg8tnqq4y80+qbVr0N993+0WPUJKfYR2hoemvsERU1ji4+MnwdQmtsXg4ODu7+8Xo7Ehi5ZIzeIecnxrmJ06s4SdAAAAFXRSTlMA+3JH/ff5ChYkyf6cwPr6/sVsrql9EH+CAAACmUlEQVRIx+3X23qrIBAFYAEFUGOOgKC+/2vuBRg/24s6pr3c00Mu2j9rGDEhVfW//qxUpRR+PqJbnfYghvdc6MJPd2w4Smt9UicqWueklbIXZ7lSPXPSOcbwDDzrM7PqE5PQUp5qHf+nL7AsztfrdQ6yN0mTgy/SSfZ8Pq+pouvp0Sk4rXeHDXnZCB6CYyYVT42/NWnFYpDBcVPqeZ3nKAUxOq2YrcFZzzOGRo7esNba6B1WhLZbOViRaSrTom+sghINPAxTm226PlqLiJJUfNljBTxHWt952MPUbxbRHMmM1LdSD2C+4rxXdRtDaAlY7fG634DjitXx/pow7PetlKI5kimLLvOy67yqd98hUC7Whr9Ek7EuWAjxnrfSfYxzT0ueJssvnffN4321BBZNuC9T8g5vm+wEnkIIS+P9oyxca+dcewbbxXsv1rujtRnr44FF9I3xytqPrxQnXk0zBGYOJ7Zih+SCQc5gGSX6dnJa/Dg+jHmNKN9ZGmYyTBbYIroxj9E3wOPw+h02P48bfzTWWgeN3nG1xofv6jrrURxFKyVs0m5yeED02HT1bSFhJPOEQ8KTO4erFduAcJv2ydjUy3xLuKNjB29Zl3EsuM8T+xVWP754WimlDQHeYWLeA+c1d+1xss7JLuDLueWN8bjiH5M/xym5z2sOLkJjm2DNzCdcU9oWBYeEYwONfYZfDePGHG9uRLs5xBnpC2SKhc3Bh5v7G4b+go8OUj2bI75DYEvXJdp1XX03R/Na35wM72+3G2O3+i7qUtlS3uoKjiysGDflcjekk4Uq2S2C7+lMxO8oTgre9PeinUDXd8Yd1+V0Qz4EZv6lyKfP9QOGVlrt6qMPKJslH5tLA1UhH308qj53f/sU3+sfoKFNfRV4XgkAAAAASUVORK5CYII=\"","import assign from 'lodash/assign'\r\nimport originJsonp from 'jsonp'\r\n\r\n// const getFormData = params => {\r\n//     for (let k in params) {\r\n//         if (typeof params[k] === 'object' && params[k] !== null) {\r\n//             params[k] = JSON.stringify(params[k])\r\n//         }\r\n//     }\r\n//     return params;\r\n// }\r\n\r\nconst urls = {\r\n    signIn: '/auth/sign_in',\r\n    forbidden: '/error/403',\r\n    internalServerError: '/error/500',\r\n    notFound: '/error/notFound'\r\n};\r\n\r\n// const ResponseCode = {\r\n//     SUCCESS: 0\r\n// };\r\n\r\n// const DEFAULT_REFRESH_INTERVAL = 1500;\r\n//\r\n// function Response(code, data) {\r\n//     this.code = code != null ? code : null;\r\n//     this.data = data != null ? data : null;\r\n// }\r\n\r\n/**\r\n *\r\n * @param promise 异步请求结果的Promise对象\r\n * @param customHandler 自定义处理函数(response, actions) => Boolean\r\n * @param actions redux Action\r\n */\r\nexport async function handleResponse(response, customHandler) {\r\n    // start to process response info\r\n    let isHandled = false,\r\n        code = response.code,\r\n        rt = null;\r\n    if(typeof customHandler === 'function') {\r\n        isHandled = customHandler(response);\r\n    }\r\n    if(!isHandled) {\r\n        // 如果尚未处理,则进入通用处理逻辑\r\n        if(code === 0) {\r\n            rt = response.data;\r\n        } else if(code >= 400 && code <= 499) {\r\n            switch (code) {\r\n                case 401 :\r\n                    window.location.href = urls.notFound;\r\n                    break;\r\n                case 403 :\r\n                    window.location.href = urls.signIn;\r\n                    break;\r\n                case 404 :\r\n                    window.location.href = urls.notFound;\r\n                    break;\r\n                default:\r\n                    window.location.href = urls.internalServerError;\r\n                    break;\r\n            }\r\n        } else if((code >= 500 && code <= 599) || code < 0) {\r\n            // window.location.href = urls.notFound;\r\n        }\r\n    } else {\r\n        rt = isHandled\r\n    }\r\n    return rt;\r\n}\r\n\r\nexport function parseQueryParams(data) {\r\n    let queryStr = \"\";\r\n    if(data) {\r\n        queryStr += \"?\";\r\n        for(let p in data) {\r\n            if(data[p] != null) {\r\n                queryStr += encodeURIComponent(p) + \"=\" + encodeURIComponent(data[p]) + \"&\";\r\n            }\r\n        }\r\n    }\r\n    queryStr = queryStr.slice(0, queryStr.length - 1);\r\n    return queryStr;\r\n}\r\n\r\n\r\nasync function commonHandler(options) {\r\n    let data = null;\r\n    try {\r\n        let response = await fetch(options.url, options);\r\n        if(response.ok) {\r\n            data = await response.json();\r\n        } else {\r\n            data = await response.text();\r\n        }\r\n\r\n    } catch (error) {\r\n        // message.error(error.message);\r\n        // throw new error(error.message)\r\n    }\r\n    return data;\r\n}\r\n\r\nasync function wsGet(options) {\r\n    options.method = \"GET\";\r\n    options.credentials = \"include\";\r\n    options.mode = 'cors';\r\n    options.headers = assign({\r\n        \"Content-Type\": \"application/json\"\r\n    }, options.headers);\r\n    if(options.data) {\r\n        options.url = options.url + parseQueryParams(options.data);\r\n    }\r\n    return await commonHandler(options);\r\n}\r\n\r\nasync function wsPost(options) {\r\n    options.method = \"POST\";\r\n    options.credentials = \"include\";\r\n    options.mode = 'cors';\r\n    options.headers = assign({\r\n        \"Content-Type\": \"application/json\"\r\n    }, options.headers);\r\n    if(options.data) {\r\n        options.body = JSON.stringify(options.data);\r\n    }\r\n    return await commonHandler(options);\r\n}\r\n\r\nasync function wsDelete(options) {\r\n    options.method = \"DELETE\";\r\n    options.credentials = \"include\";\r\n    options.mode = 'cors';\r\n    options.headers = assign({\r\n        \"Content-Type\": \"application/json\"\r\n    }, options.headers);\r\n    return await commonHandler(options);\r\n}\r\n\r\nexport async function ws(method, options) {\r\n    let result;\r\n    method = method ? method.toUpperCase() : \"\";\r\n    switch (method) {\r\n        case \"GET\":\r\n            result = await wsGet(options);\r\n            break;\r\n        case \"POST\":\r\n            result = await wsPost(options);\r\n            break;\r\n        case \"DELETE\":\r\n            result = await wsDelete(options);\r\n            break;\r\n        default:\r\n            result = null;\r\n    }\r\n    if(result) {\r\n        if(options.handler) {\r\n            result = await handleResponse(result, options.handler);\r\n        } else {\r\n            result = await handleResponse(result);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function jsonp(url, data, option) {\r\n    url += (url.indexOf('?')<0 ? '?' : '&') + parseQueryParams(data);\r\n\r\n    return new Promise((resolve, reject)=> {\r\n      originJsonp(url, option, (err, data) => {\r\n        if(!err){\r\n          resolve(data)\r\n        }else{\r\n          reject(data)\r\n        }\r\n      })\r\n    })\r\n}","import {getLyric} from 'api/song'\r\nimport {ERR_OK} from 'api/config'\r\nimport {Base64} from 'js-base64'\r\n\r\nexport default class Song {\r\n    constructor({id, mid, singer, name, album, duration, image, url}) {\r\n        this.id = id\r\n        this.mid = mid\r\n        this.singer = singer\r\n        this.name = name\r\n        this.album = album\r\n        this.duration = duration\r\n        this.image = image\r\n        this.url = url\r\n    }\r\n\r\n    getLyric() {\r\n        if (this.lyric) {\r\n            return Promise.resolve(this.lyric)\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            getLyric(this.mid).then((res) => {\r\n                if (res.retcode === ERR_OK) {\r\n                    this.lyric = Base64.decode(res.lyric)\r\n                    resolve(this.lyric)\r\n                } else {\r\n                    reject('no lyric')\r\n                }\r\n            })\r\n        })\r\n    }\r\n}\r\n\r\nexport function createSongSearch(musicData) {\r\n    return new Song({\r\n        id: musicData.id,\r\n        mid: musicData.mid,\r\n        singer: filterSinger(musicData.singer),\r\n        name: musicData.name,\r\n        album: musicData.album.name,\r\n        duration: musicData.interval,\r\n        image: `https://y.gtimg.cn/music/photo_new/T002R300x300M000${musicData.album.mid}.jpg?max_age=2592000`,\r\n        url: `https://api.bzqll.com/music/tencent/url?key=579621905&id=${musicData.mid}br=320`\r\n    })\r\n}\r\n\r\nexport function createSong(musicData) {\r\n    return new Song({\r\n        id: musicData.songid,\r\n        mid: musicData.songmid,\r\n        singer: filterSinger(musicData.singer),\r\n        name: musicData.songname,\r\n        album: musicData.albumname,\r\n        duration: musicData.interval,\r\n        image: `https://y.gtimg.cn/music/photo_new/T002R300x300M000${musicData.albummid}.jpg?max_age=2592000`,\r\n        url: `https://api.bzqll.com/music/tencent/url?key=579621905&id=${musicData.songmid}br=320`,\r\n        url1: `https://c.y.qq.com/v8/fcg-bin/fcg_v8_album_info_cp.fcg?albummid=${musicData.songmid}&g_tk=5381&loginUin=0&hostUin=0&format=json&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq.json&needNewCode=0`\r\n    })\r\n}\r\n\r\nfunction filterSinger(singer) {\r\n    let ret = []\r\n    if (!singer) {\r\n        return ''\r\n    }\r\n    singer.forEach((s) => {\r\n        ret.push(s.name)\r\n    })\r\n    return ret.join('/')\r\n}\r\n\r\n","import {commonParams} from './config'\nimport axios from 'axios'\n\nexport function getLyric(mid) {\n  const url = '/api/lyric'\n\n  const data = Object.assign({}, commonParams, {\n    songmid: mid,\n    platform: 'yqq',\n    hostUin: 0,\n    needNewCode: 0,\n    categoryId: 10000000,\n    pcachetime: +new Date(),\n    format: 'json'\n  })\n\n  return axios.get(url, {\n    params: data\n  }).then((res) => {\n    return Promise.resolve(res.data)\n  })\n}\n","import React, {Component} from 'react'\r\nimport './SongList.scss'\r\n\r\ntype itemType = {\r\n    singer: string\r\n    name : string\r\n    album : string\r\n    [index:number]:any\r\n    [key:string]:any\r\n}\r\n\r\ninterface SongListProps{\r\n    songs:Array<itemType>,\r\n    rank:boolean,\r\n    selectItem:Function\r\n}\r\n\r\ninterface SongListState{\r\n\r\n}\r\n\r\nclass SongList extends Component<SongListProps, SongListState>{\r\n    constructor(props: SongListProps){\r\n        super(props)\r\n    }\r\n\r\n    getRankCls = (index:number) => {\r\n        if (index <= 2) {\r\n            return `icon icon${index}`\r\n        } else {\r\n            return 'text'\r\n        }\r\n    }\r\n\r\n    getRankText = (index:number) => {\r\n        if (index > 2) {\r\n            return index + 1\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const {songs, rank, selectItem} = this.props;\r\n        return (\r\n            <div className=\"song-list\">\r\n                <ul>\r\n                    {\r\n                        !!songs.length && songs.map((item, index) => (\r\n                            <li  key={index} className=\"item\" onClick={()=>{selectItem(item, index)}}>\r\n                                <div className=\"item-rank\" style={{display:rank?\"\":\"none\"}}>\r\n                                    <span\r\n                                        className={this.getRankCls(index)}\r\n                                    >{this.getRankText(index)}</span>\r\n                                </div>\r\n                                <div className=\"content\">\r\n                                    <h2 className=\"name\">{item.name}</h2>\r\n                                    <p className=\"desc\">{`${item.singer}·${item.album}`}</p>\r\n                                </div>\r\n                            </li>\r\n                        ))\r\n                    }\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SongList","import React, {Component} from 'react'\r\nimport Scroll from 'reuse/scroll/Scroll'\r\nimport Loading from 'reuse/loading/Loading'\r\nimport SongList from 'reuse/song-list/SongList'\r\nimport './MusicList.scss'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n    setPlaying,\r\n    setFullScreen,\r\n    setSequenceList,\r\n    setPlaylist,\r\n    setCurrentIndex,\r\n    setPlayMode\r\n} from 'actions/player'\r\nimport {playMode} from 'common/js/config'\r\nimport {shuffle} from 'common/js/util'\r\n\r\nimport { Dispatch } from 'redux'\r\nimport {\r\n    ISong ,\r\n    IPlaying,\r\n    ICurrentIndex,\r\n    IMode,\r\n    IPlaylist,\r\n    ISequenceList,\r\n    IFullScreen,\r\n    IStoreState\r\n} from 'store/stateTypes'\r\n\r\nimport {prefixStyle} from 'common/js/dom.js'\r\nconst transform = prefixStyle('transform')\r\nconst backdrop = prefixStyle('backdrop-filter')\r\n\r\nconst RESERVED_HEIGHT = 40\r\n\r\ninterface MusicListProps{\r\n    singerName: string,\r\n    songs:Array<ISong>,\r\n    bgImage:string,\r\n    back:Function,\r\n    setPlaying:Function,\r\n    setFullScreen:Function,\r\n    setSequenceList:Function,\r\n    setPlaylist:Function,\r\n    setCurrentIndex:Function,\r\n    setPlayMode:Function,\r\n    mode:number,\r\n    playlist:IPlaylist,\r\n    rank?:boolean\r\n}\r\n\r\ninterface MusicListState{\r\n    minTransalteY: number,\r\n    imageHeight: number\r\n}\r\n\r\n\r\n\r\nclass MusicList extends Component<MusicListProps, MusicListState>{\r\n    bgImage : React.RefObject<HTMLDivElement>;\r\n    list : React.RefObject<Scroll>;\r\n    layer : React.RefObject<HTMLDivElement>;\r\n    filter : React.RefObject<HTMLDivElement>;\r\n    playBtn : React.RefObject<HTMLDivElement>;\r\n    constructor(props:MusicListProps){\r\n        super(props)\r\n        this.bgImage = React.createRef();\r\n        this.list = React.createRef();\r\n        this.layer = React.createRef();\r\n        this.filter = React.createRef();\r\n        this.playBtn = React.createRef();\r\n        this.state = {\r\n            minTransalteY : 0,\r\n            imageHeight: 0\r\n        }\r\n    }\r\n\r\n\r\n\r\n    componentDidMount(){\r\n        if(!this.bgImage.current || !this.list.current || !this.list.current.wrapper.current){\r\n            return\r\n        }\r\n        let listTop = this.bgImage.current.clientHeight;\r\n        this.list.current.wrapper.current.style.top = `${listTop}px`;\r\n        this.setState({\r\n            imageHeight: listTop,\r\n            minTransalteY: -listTop + RESERVED_HEIGHT\r\n        })\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        // console.log(\"musiclist componentWillUnmount\")\r\n    }\r\n\r\n    scrollHandler = (pos : {x:number,y:number}) => {\r\n        if(!this.bgImage.current || !this.layer.current || !this.playBtn.current || !this.filter.current){\r\n            return\r\n        }\r\n        if(Object.is(pos.y,NaN)){\r\n            return\r\n        }\r\n        let layer = this.layer.current;\r\n        let bgImage = this.bgImage.current;\r\n        let playBtn = this.playBtn.current;\r\n        let newY = pos.y;\r\n        let translateY = Math.max(this.state.minTransalteY, newY)\r\n        let scale = 1\r\n        let zIndex = 0\r\n        let blur = 0\r\n        const percent = Math.abs(newY / this.state.imageHeight)\r\n        if (newY > 0) {\r\n            scale = 1 + percent\r\n            zIndex = 10\r\n        } else {\r\n            blur = Math.min(20, percent * 20)\r\n        }\r\n        layer.style[transform] = `translate3d(0,${translateY}px,0)`\r\n        this.filter.current.style[backdrop] = `blur(${blur}px)`\r\n        if (newY < this.state.minTransalteY) {\r\n            zIndex = 10\r\n            bgImage.style.paddingTop = '0'\r\n            bgImage.style.height = `${RESERVED_HEIGHT}px`\r\n            playBtn.style.display = 'none'\r\n        } else {\r\n            bgImage.style.paddingTop = '70%'\r\n            bgImage.style.height = '0'\r\n            playBtn.style.display = ''\r\n        }\r\n        bgImage.style[transform] = `scale(${scale})`\r\n        bgImage.style.zIndex = zIndex + \"\"\r\n    }\r\n\r\n    back = () => {\r\n        this.props.back()\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        this.handlePlaylist(this.props.playlist)\r\n    }\r\n\r\n    handlePlaylist= (playlist:IPlaylist) => {\r\n        let list =this.list.current\r\n        if(!list){\r\n            return\r\n        }\r\n        const bottom = playlist.length > 0 ? '60px' : ''\r\n        list.wrapper.current && (list.wrapper.current.style.bottom = bottom)\r\n        list.refresh()\r\n    }\r\n\r\n    findIndex = (list:ISequenceList, song:ISong) => {\r\n        return list.findIndex((item) => {\r\n            return item.id === song.id\r\n        })\r\n    }\r\n\r\n    selectSong = (song: ISong, index: number) => {\r\n        this.props.setSequenceList(this.props.songs)\r\n        if (this.props.mode === playMode.random) {\r\n            let randomList = shuffle(this.props.songs)\r\n            this.props.setPlaylist(randomList)\r\n            index = this.findIndex(randomList, this.props.songs[index])\r\n        } else {\r\n            this.props.setPlaylist(this.props.songs)\r\n        }\r\n        this.props.setPlaying(true)\r\n        this.props.setFullScreen(true)\r\n        this.props.setCurrentIndex(index)\r\n    }\r\n\r\n    random = () => {\r\n        this.props.setPlayMode(playMode.random)\r\n        this.props.setSequenceList(this.props.songs)\r\n        let randomList = shuffle(this.props.songs)\r\n        // console.log(\"randomList\",randomList)\r\n        this.props.setPlaylist(randomList)\r\n        this.props.setFullScreen(true)\r\n        this.props.setCurrentIndex(0)\r\n        this.props.setPlaying(true)\r\n    }\r\n\r\n    render(){\r\n        // console.log(\"MusicListBase\",this.props)\r\n        const { bgImage, songs, singerName } = this.props;\r\n        const rank = this.props.rank || false;\r\n        return (\r\n            <div className=\"music-list\">\r\n                <div className=\"back\" onClick={this.back}>\r\n                    <i className=\"icon-back\"/>\r\n                </div>\r\n                <h1 className=\"title\">{singerName}</h1>\r\n                <div className=\"bg-image\" style={{backgroundImage:bgImage?`url(${bgImage})`:\"\"}} ref={this.bgImage}>\r\n                    {\r\n                        !!songs.length &&\r\n                        <div className=\"play-wrapper\">\r\n                            <div className=\"play\" ref={this.playBtn} onClick={this.random}>\r\n                                <i className=\"icon-play\"/>\r\n                                <span className=\"text\">随机播放全部</span>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    <div className=\"filter\" ref={this.filter}></div>\r\n                </div>\r\n                <div className=\"bg-layer\" ref={this.layer}></div>\r\n                <Scroll className=\"list\" probeType={3} ref={this.list} scrollHandler={this.scrollHandler}>\r\n                    <div className=\"song-list-wrapper\">\r\n                        <SongList songs={songs} rank={rank} selectItem={this.selectSong}/>\r\n                    </div>\r\n                    {\r\n                        !songs.length &&\r\n                        <div className=\"loading-container\">\r\n                            <Loading/>\r\n                        </div>\r\n                    }\r\n                </Scroll>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state:IStoreState) => ({\r\n    mode:state.mode,\r\n    playlist:state.playlist\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch:Dispatch) => {\r\n    return {\r\n        setPlaying: (playing:IPlaying) => (\r\n            dispatch(setPlaying(playing))\r\n        ),\r\n        setFullScreen: (fullScreen:IFullScreen) => (\r\n            dispatch(setFullScreen(fullScreen))\r\n        ),\r\n        setSequenceList: (list:ISequenceList) => (\r\n            dispatch(setSequenceList(list))\r\n        ),\r\n        setPlaylist: (list:IPlaylist) => (\r\n            dispatch(setPlaylist(list))\r\n        ),\r\n        setCurrentIndex: (index:ICurrentIndex) => (\r\n            dispatch(setCurrentIndex(index))\r\n        ),\r\n        setPlayMode: (mode:IMode) => {\r\n            dispatch(setPlayMode(mode))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MusicList)","/**\n * @Description: loadAndUnobserve为加载资源的关键入口函数\n * @author: liaohuanyu\n * @date 2019/2/1\n*/\nconst defaultSettings = {\n\telements_selector: \"img\",\n\tcontainer: document,\n\tthreshold: 300,\n\tthresholds: null,\n\tdata_src: \"src\",\n\tdata_srcset: \"srcset\",\n\tdata_sizes: \"sizes\",\n\tdata_bg: \"bg\",\n\tclass_loading: \"loading\",\n\tclass_loaded: \"loaded\",\n\tclass_error: \"error\",\n\tload_delay: 0,\n\tcallback_load: null,\n\tcallback_error: null,\n\tcallback_set: null,\n\tcallback_enter: null,\n\tcallback_finish: null,\n\tto_webp: false\n};\n\n//将用户的设置与默认的设置合并\nvar getInstanceSettings = customSettings => {\n\treturn Object.assign({}, defaultSettings, customSettings);\n};\n\nconst dataPrefix = \"data-\";\nconst processedDataName = \"was-processed\";\nconst timeoutDataName = \"ll-timeout\";\nconst trueString = \"true\";\n\nconst getData = (element, attribute) => {\n\treturn element.getAttribute(dataPrefix + attribute);\n};\n\nconst setData = (element, attribute, value) => {\n\tvar attrName = dataPrefix + attribute;\n\tif (value === null) {\n\t\telement.removeAttribute(attrName);\n\t\treturn;\n\t}\n\telement.setAttribute(attrName, value);\n};\n\nconst setWasProcessedData = element =>\n\tsetData(element, processedDataName, trueString);\n\nconst getWasProcessedData = element =>\n\tgetData(element, processedDataName) === trueString;\n\nconst setTimeoutData = (element, value) =>\n\tsetData(element, timeoutDataName, value);\n\nconst getTimeoutData = element => getData(element, timeoutDataName);\n\nconst purgeProcessedElements = elements => {\n\treturn elements.filter(element => !getWasProcessedData(element));\n};\n\nconst purgeOneElement = (elements, elementToPurge) => {\n\treturn elements.filter(element => element !== elementToPurge);\n};\n\n/* Creates instance and notifies it through the window element */\nconst createInstance = function(classObj, options) {\n\tvar event;\n\tlet eventString = \"LazyLoad::Initialized\";\n\tlet instance = new classObj(options);\n\ttry {\n\t\t// Works in modern browsers\n\t\tevent = new CustomEvent(eventString, { detail: { instance } });\n\t} catch (err) {\n\t\t// Works in Internet Explorer (all versions)\n\t\tevent = document.createEvent(\"CustomEvent\");\n\t\tevent.initCustomEvent(eventString, false, false, { instance });\n\t}\n\twindow.dispatchEvent(event);\n};\n\n/* Auto initialization of one or more instances of lazyload, depending on the \n    options passed in (plain object or an array) */\nfunction autoInitialize(classObj, options) {\n\tif (!options) {\n\t\treturn;\n\t}\n\tif (!options.length) {\n\t\t// Plain object\n\t\tcreateInstance(classObj, options);\n\t} else {\n\t\t// Array of objects\n\t\tfor (let i = 0, optionsItem; (optionsItem = options[i]); i += 1) {\n\t\t\tcreateInstance(classObj, optionsItem);\n\t\t}\n\t}\n}\n\nconst replaceExtToWebp = (value, condition) =>\n\tcondition ? value.replace(/\\.(jpe?g|png)/gi, \".webp\") : value;\n\n//判断浏览器是否支持WebP这种图片格式\nconst detectWebp = () => {\n\tvar webpString = \"image/webp\";\n\tvar canvas = document.createElement(\"canvas\");\n\n\tif (canvas.getContext && canvas.getContext(\"2d\")) {\n\t\treturn canvas.toDataURL(webpString).indexOf(`data:${webpString}`) === 0;\n\t}\n\n\treturn false;\n};\n\n//是否是在浏览器环境上运行\nconst runningOnBrowser = typeof window !== \"undefined\";\n\n//判断是否是爬虫\nconst isBot =\n\t(runningOnBrowser && !(\"onscroll\" in window)) ||\n\t/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent);\n\n//判断是否存在IntersectionObserver这个api\nconst supportsIntersectionObserver =\n\trunningOnBrowser && \"IntersectionObserver\" in window;\n\n//是否支持classList功能\nconst supportsClassList =\n\trunningOnBrowser && \"classList\" in document.createElement(\"p\");\n\n//浏览器是否支持WebP文件格式的标志\nconst supportsWebp = runningOnBrowser && detectWebp();\n\n\nconst setSourcesInChildren = function(\n\tparentTag,\n\tattrName,\n\tdataAttrName,\n\ttoWebpFlag\n) {\n\tfor (let i = 0, childTag; (childTag = parentTag.children[i]); i += 1) {\n\t\tif (childTag.tagName === \"SOURCE\") {\n\t\t\tlet attrValue = getData(childTag, dataAttrName);\n\t\t\tsetAttributeIfValue(childTag, attrName, attrValue, toWebpFlag);\n\t\t}\n\t}\n};\n\nconst setAttributeIfValue = function(\n\telement,\n\tattrName,\n\tvalue,\n\ttoWebpFlag\n) {\n\tif (!value) {\n\t\treturn;\n\t}\n\telement.setAttribute(attrName, replaceExtToWebp(value, toWebpFlag));\n};\n\nconst setSourcesImg = (element, settings) => {\n\tconst toWebpFlag = supportsWebp && settings.to_webp;\n\tconst srcsetDataName = settings.data_srcset;\n\tconst parent = element.parentNode;\n\n\tif (parent && parent.tagName === \"PICTURE\") {\n\t\tsetSourcesInChildren(parent, \"srcset\", srcsetDataName, toWebpFlag);\n\t}\n\t//给img元素上的sizes，srcset，src赋值\n\tconst sizesDataValue = getData(element, settings.data_sizes);\n\tsetAttributeIfValue(element, \"sizes\", sizesDataValue);\n\tconst srcsetDataValue = getData(element, srcsetDataName);\n\tsetAttributeIfValue(element, \"srcset\", srcsetDataValue, toWebpFlag);\n\tconst srcDataValue = getData(element, settings.data_src);\n\tsetAttributeIfValue(element, \"src\", srcDataValue, toWebpFlag);\n};\n\nconst setSourcesIframe = (element, settings) => {\n\tconst srcDataValue = getData(element, settings.data_src);\n\n\tsetAttributeIfValue(element, \"src\", srcDataValue);\n};\n\nconst setSourcesVideo = (element, settings) => {\n\tconst srcDataName = settings.data_src;\n\tconst srcDataValue = getData(element, srcDataName);\n\n\tsetSourcesInChildren(element, \"src\", srcDataName);\n\tsetAttributeIfValue(element, \"src\", srcDataValue);\n\telement.load();\n};\n\nconst setSourcesBgImage = (element, settings) => {\n\tconst toWebpFlag = supportsWebp && settings.to_webp;\n\tconst srcDataValue = getData(element, settings.data_src);\n\tconst bgDataValue = getData(element, settings.data_bg);\n\n\tif (srcDataValue) {\n\t\tlet setValue = replaceExtToWebp(srcDataValue, toWebpFlag);\n\t\telement.style.backgroundImage = `url(\"${setValue}\")`;\n\t}\n\n\tif (bgDataValue) {\n\t\tlet setValue = replaceExtToWebp(bgDataValue, toWebpFlag);\n\t\telement.style.backgroundImage = setValue;\n\t}\n};\n\nconst setSourcesFunctions = {\n\tIMG: setSourcesImg,\n\tIFRAME: setSourcesIframe,\n\tVIDEO: setSourcesVideo\n};\n\nconst setSources = (element, instance) => {\n\tconst settings = instance._settings;\n\tconst tagName = element.tagName;\n\tconst setSourcesFunction = setSourcesFunctions[tagName];\n\tif (setSourcesFunction) {\n\t\tsetSourcesFunction(element, settings);\n\t\tinstance._updateLoadingCount(1);\n\t\t//处理一个元素之后，从即将被处理的元素集合中删除\n\t\tinstance._elements = purgeOneElement(instance._elements, element);\n\t\treturn;\n\t}\n\tsetSourcesBgImage(element, settings);\n};\n\nconst addClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.add(className);\n\t\treturn;\n\t}\n\telement.className += (element.className ? \" \" : \"\") + className;\n};\n\nconst removeClass = (element, className) => {\n\tif (supportsClassList) {\n\t\telement.classList.remove(className);\n\t\treturn;\n\t}\n\telement.className = element.className\n\t\t.replace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \")\n\t\t.replace(/^\\s+/, \"\")\n\t\t.replace(/\\s+$/, \"\");\n};\n\nconst callbackIfSet = (callback, argument) => {\n\tif (callback) {\n\t\tcallback(argument);\n\t}\n};\n\nconst genericLoadEventName = \"load\";\nconst mediaLoadEventName = \"loadeddata\";\nconst errorEventName = \"error\";\n\nconst addEventListener = (element, eventName, handler) => {\n\telement.addEventListener(eventName, handler);\n};\n\nconst removeEventListener = (element, eventName, handler) => {\n\telement.removeEventListener(eventName, handler);\n};\n\n//添加load事件，并注册事件的回调函数\nconst addEventListeners = (element, loadHandler, errorHandler) => {\n\taddEventListener(element, genericLoadEventName, loadHandler);\n\taddEventListener(element, mediaLoadEventName, loadHandler);\n\taddEventListener(element, errorEventName, errorHandler);\n};\n\nconst removeEventListeners = (element, loadHandler, errorHandler) => {\n\tremoveEventListener(element, genericLoadEventName, loadHandler);\n\tremoveEventListener(element, mediaLoadEventName, loadHandler);\n\tremoveEventListener(element, errorEventName, errorHandler);\n};\n\nconst eventHandler = function(event, success, instance) {\n\tvar settings = instance._settings;\n\tconst className = success ? settings.class_loaded : settings.class_error;\n\tconst callback = success ? settings.callback_load : settings.callback_error;\n\tconst element = event.target;\n\n\tremoveClass(element, settings.class_loading);\n\taddClass(element, className);\n\tcallbackIfSet(callback, element);\n\n\tinstance._updateLoadingCount(-1);\n};\n\nconst addOneShotEventListeners = (element, instance) => {\n\tconst loadHandler = event => {\n\t\teventHandler(event, true, instance);\n\t\tremoveEventListeners(element, loadHandler, errorHandler);\n\t};\n\tconst errorHandler = event => {\n\t\teventHandler(event, false, instance);\n\t\tremoveEventListeners(element, loadHandler, errorHandler);\n\t};\n\taddEventListeners(element, loadHandler, errorHandler);\n};\n\nconst managedTags = [\"IMG\", \"IFRAME\", \"VIDEO\"];\n\nconst loadAndUnobserve = (element, observer, instance) => {\n\trevealElement(element, instance);\n\tobserver.unobserve(element);\n};\n\n//清除定时器\nconst cancelDelayLoad = element => {\n\tvar timeoutId = getTimeoutData(element);\n\tif (!timeoutId) {\n\t\treturn; // do nothing if timeout doesn't exist\n\t}\n\tclearTimeout(timeoutId);\n\tsetTimeoutData(element, null);\n};\n\nconst delayLoad = (element, observer, instance) => {\n\tvar loadDelay = instance._settings.load_delay;\n\tvar timeoutId = getTimeoutData(element);\n\tif (timeoutId) {\n\t\treturn; // do nothing if timeout already set\n\t}\n\ttimeoutId = setTimeout(function() {\n\t\tloadAndUnobserve(element, observer, instance);\n\t\t//清除定时器，取消延迟执行\n\t\tcancelDelayLoad(element);\n\t}, loadDelay);\n\t//将定时器id保存到元素的自定义属性上。\n\tsetTimeoutData(element, timeoutId);\n};\n\nfunction revealElement(element, instance, force) {\n\tvar settings = instance._settings;\n\t//判断不需要强制加载并且该元素已经加载完成，则不需要做任何操作\n\tif (!force && getWasProcessedData(element)) {\n\t\treturn; // element has already been processed and force wasn't true\n\t}\n\t//执行用户给的回调函数：settings.callback_enter（element）\n\tcallbackIfSet(settings.callback_enter, element);\n\tif (managedTags.indexOf(element.tagName) > -1) {\n\t\t//设置自定义事件，当element的load之后将loading状态的class替换成loaded\n\t\taddOneShotEventListeners(element, instance);\n\t\t//设置element的class为loading，表示正在加载\n\t\taddClass(element, settings.class_loading);\n\t}\n\t//主要的加载逻辑在setSources函数中，如果是img则调用setSourcesImg函数，\n\t// setSourcesImg函数对图片作了优化，选用WebP的文件格式进行优化。\n\tsetSources(element, instance);\n\t//在元素上设置属性data-wap-processed为true\n\tsetWasProcessedData(element);\n\tcallbackIfSet(settings.callback_set, element);\n}\n\n/* entry.isIntersecting needs fallback because is null on some versions of MS Edge, and\n   entry.intersectionRatio is not enough alone because it could be 0 on some intersecting elements */\nconst isIntersecting = entry =>\n\tentry.isIntersecting || entry.intersectionRatio > 0;\n\nconst getObserverSettings = settings => ({\n\troot: settings.container === document ? null : settings.container,\n\trootMargin: settings.thresholds || settings.threshold + \"px\"\n});\n\nconst LazyLoad = function(customSettings, elements) {\n\t//将用户的设置与默认的设置合并\n\tthis._settings = getInstanceSettings(customSettings);\n    //创建IntersectionObserver实例，设置事件回调函数\n\tthis._setObserver();\n    //loading的数量\n\tthis._loadingCount = 0;\n    //开始对目标元素监听\n\tthis.update(elements);\n};\n\nLazyLoad.prototype = {\n\t_manageIntersection: function(entry) {\n\t\tvar observer = this._observer;\n\t\tvar loadDelay = this._settings.load_delay;\n\t\tvar element = entry.target;\n\n\t\t//判断用户是否设置了延迟加载的时间，即停留在可视窗口（或者已经与祖先元素有交叉）的一定时间之后再加载图片\n\t\t// WITHOUT LOAD DELAY\n\t\tif (!loadDelay) {\n\t\t\t//判断（entry：element）是否已经与祖先元素有交叉\n\t\t\tif (isIntersecting(entry)) {\n\t\t\t\tloadAndUnobserve(element, observer, this);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// WITH LOAD DELAY\n\t\tif (isIntersecting(entry)) {\n\t\t\tdelayLoad(element, observer, this);\n\t\t} else {\n\t\t\tcancelDelayLoad(element);\n\t\t}\n\t},\n\n\t_onIntersection: function(entries) {\n\t\tentries.forEach(this._manageIntersection.bind(this));\n\t},\n\n\t//监听器\n\t_setObserver: function() {\n\t\t//判断浏览器是否支持IntersectionObserver\n\t\tif (!supportsIntersectionObserver) {\n\t\t\treturn;\n\t\t}\n\t\t//\n\t\tthis._observer = new IntersectionObserver(\n\t\t\tthis._onIntersection.bind(this),\n\t\t\tgetObserverSettings(this._settings)\n\t\t);\n\t},\n\n\t_updateLoadingCount: function(plusMinus) {\n\t\tthis._loadingCount += plusMinus;\n\t\tif (this._elements.length === 0 && this._loadingCount === 0) {\n\t\t\tcallbackIfSet(this._settings.callback_finish);\n\t\t}\n\t},\n\n\tupdate: function(elements) {\n\t\tconst settings = this._settings;\n\t\tconst nodeSet =\n\t\t\telements ||\n\t\t\tsettings.container.querySelectorAll(settings.elements_selector);\n\n\t\t//获取没有被处理的元素集合\n\t\tthis._elements = purgeProcessedElements(\n\t\t\tArray.prototype.slice.call(nodeSet) // NOTE: nodeset to array for IE compatibility\n\t\t);\n\n\t\tif (isBot || !this._observer) {\n\t\t\tthis.loadAll();\n\t\t\treturn;\n\t\t}\n\n        //每个元素都用IntersectionObserver创建的监听器进行监听，当img元素与root交叉时，执行设置的回调函数。\n\t\tthis._elements.forEach(element => {\n\t\t\tthis._observer.observe(element);\n\t\t});\n\t},\n\n\tdestroy: function() {\n\t\tif (this._observer) {\n\t\t\tthis._elements.forEach(element => {\n\t\t\t\tthis._observer.unobserve(element);\n\t\t\t});\n\t\t\tthis._observer = null;\n\t\t}\n\t\tthis._elements = null;\n\t\tthis._settings = null;\n\t},\n\n\tload: function(element, force) {\n\t\trevealElement(element, this, force);\n\t},\n\n\tloadAll: function() {\n\t\tvar elements = this._elements;\n\t\telements.forEach(element => {\n\t\t\tthis.load(element);\n\t\t});\n\t}\n};\n\n/* Automatic instances creation if required (useful for async script loading) */\nif (runningOnBrowser) {\n\tautoInitialize(LazyLoad, window.lazyLoadOptions);\n}\n\nexport default LazyLoad;\n","/**\r\n * @Description: 在使用该组件时需要传入的必选参数为className\r\n *                 className中第一个class是用于选择需要懒加载的元素，其他的class则是表示样式\r\n * @author: liaohuanyu\r\n * @date 2019/2/1\r\n*/\r\nimport React,{Component} from \"react\";\r\nimport LazyLoad from \"common/js/lazyload.es2015.js\"\r\nimport logo from \"./logo@2x.png\"\r\n\r\ninterface LazyImageProps{\r\n    className:string,\r\n    alt?:string,\r\n    src?:string,\r\n    srcset?:string,\r\n    sizes?:string,\r\n    width?:string,\r\n    height?:string,\r\n    containerClassName?:string\r\n}\r\n\r\ninterface LazyImageState{\r\n\r\n}\r\n\r\n\r\nexport class LazyImage extends Component <LazyImageProps, LazyImageState> {\r\n    lazyLoadInstance:any\r\n    constructor(props:LazyImageProps){\r\n        super(props);\r\n        this.lazyLoadInstance = null;\r\n    }\r\n\r\n    // Update lazyLoad after first rendering of every image\r\n    componentDidMount() {\r\n        // console.log('lazyLoadInstance')\r\n        if(!this.lazyLoadInstance){\r\n            let container;\r\n            try{\r\n                container = document.getElementsByClassName(this.props.containerClassName+\"\")[0]\r\n            }\r\n            catch(err){\r\n                container = null;\r\n            };\r\n            const lazyloadConfig = {\r\n                elements_selector: \".\"+this.props.className.split(\" \")[0],\r\n                container: container,\r\n                threshold:0\r\n            };\r\n            this.lazyLoadInstance = new LazyLoad(lazyloadConfig);\r\n        }\r\n        this.lazyLoadInstance.update();\r\n    }\r\n    render() {\r\n        const { alt, srcset, sizes, width, height, className } = this.props;\r\n        let src = this.props.src ? this.props.src : logo;\r\n        return (\r\n            <img\r\n                alt={alt}\r\n                className={className}\r\n                src={logo}\r\n                data-src={src}\r\n                data-srcset={srcset}\r\n                data-sizes={sizes}\r\n                width={width}\r\n                height={height}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default LazyImage;\r\n","export const SET_SINGER = 'SET_SINGER'\r\n\r\nexport const SET_PLAYING_STATE = 'SET_PLAYING_STATE'\r\n\r\nexport const SET_FULL_SCREEN = 'SET_FULL_SCREEN'\r\n\r\nexport const SET_PLAYLIST = 'SET_PLAYLIST'\r\n\r\nexport const SET_SEQUENCE_LIST = 'SET_SEQUENCE_LIST'\r\n\r\nexport const SET_PLAY_MODE = 'SET_PLAY_MODE'\r\n\r\nexport const SET_CURRENT_INDEX = 'SET_CURRENT_INDEX'\r\n\r\nexport const SET_DISC = 'SET_DISC'\r\n\r\nexport const SET_TOP_LIST = 'SET_TOP_LIST'\r\n\r\nexport const SET_SEARCH_HISTORY = 'SET_SEARCH_HISTORY'","import React,{ Component } from 'react'\r\nimport './Confirm.scss'\r\n\r\ninterface ConfirmProps{\r\n    text:string,\r\n    confirmBtnText?:string,\r\n    cancelBtnText?:string,\r\n    confirmHandler:Function\r\n}\r\n\r\ninterface ConfirmState{\r\n    showFlag:boolean\r\n}\r\n\r\n\r\nclass Confirm extends Component<ConfirmProps,ConfirmState>{\r\n    constructor(props:ConfirmProps){\r\n        super(props);\r\n        this.state={\r\n            showFlag:false\r\n        }\r\n    }\r\n\r\n    show = () => {\r\n        this.setState({\r\n            showFlag : true\r\n        })\r\n    }\r\n\r\n    hide = () => {\r\n        this.setState({\r\n            showFlag : false\r\n        })\r\n    }\r\n\r\n    cancel = () => {\r\n        this.hide()\r\n    }\r\n\r\n    confirm = () => {\r\n        this.hide()\r\n        this.props.confirmHandler()\r\n    }\r\n\r\n    render(){\r\n        const {text} = this.props\r\n        const cancelBtnText = this.props.cancelBtnText || '取消'\r\n        const confirmBtnText = this.props.confirmBtnText || '确定'\r\n        const {showFlag} = this.state\r\n        return(\r\n            <div className=\"confirm\" style={{display:showFlag?\"\":\"none\"}}>\r\n                <div className=\"confirm-wrapper\">\r\n                    <div className=\"confirm-content\">\r\n                        <p className=\"text\">{text}</p>\r\n                        <div className=\"operate\">\r\n                            <div  className=\"operate-btn left\" onClick={this.cancel}>{cancelBtnText}</div>\r\n                            <div  className=\"operate-btn\" onClick={this.confirm}>{confirmBtnText}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Confirm","import storage from 'good-storage'\n\nconst SEARCH_KEY = '__search__'\nconst SEARCH_MAX_LEN = 15\n\nconst PLAY_KEY = '__play__'\nconst PLAY_MAX_LEN = 200\n\nconst FAVORITE_KEY = '__favorite__'\nconst FAVORITE_MAX_LEN = 200\n\nfunction insertArray(arr, val, compare, maxLen) {\n  const index = arr.findIndex(compare)\n  if (index === 0) {\n    return\n  }\n  if (index > 0) {\n    arr.splice(index, 1)\n  }\n  arr.unshift(val)\n  if (maxLen && arr.length > maxLen) {\n    arr.pop()\n  }\n}\n\nfunction deleteFromArray(arr, compare) {\n  const index = arr.findIndex(compare)\n  if (index > -1) {\n    arr.splice(index, 1)\n  }\n}\n\nexport function saveSearch(query) {\n  let searches = storage.get(SEARCH_KEY, [])\n  insertArray(searches, query, (item) => {\n    return item === query\n  }, SEARCH_MAX_LEN)\n  storage.set(SEARCH_KEY, searches)\n  return searches\n}\n\nexport function deleteSearch(query) {\n  let searches = storage.get(SEARCH_KEY, [])\n  deleteFromArray(searches, (item) => {\n    return item === query\n  })\n  storage.set(SEARCH_KEY, searches)\n  return searches\n}\n\nexport function clearSearch() {\n  storage.remove(SEARCH_KEY)\n  return []\n}\n\nexport function loadSearch() {\n  return storage.get(SEARCH_KEY, [])\n}\n\nexport function savePlay(song) {\n  let songs = storage.get(PLAY_KEY, [])\n  insertArray(songs, song, (item) => {\n    return song.id === item.id\n  }, PLAY_MAX_LEN)\n  storage.set(PLAY_KEY, songs)\n  return songs\n}\n\nexport function loadPlay() {\n  return storage.get(PLAY_KEY, [])\n}\n\nexport function saveFavorite(song) {\n  let songs = storage.get(FAVORITE_KEY, [])\n  insertArray(songs, song, (item) => {\n    return song.id === item.id\n  }, FAVORITE_MAX_LEN)\n  storage.set(FAVORITE_KEY, songs)\n  return songs\n}\n\nexport function deleteFavorite(song) {\n  let songs = storage.get(FAVORITE_KEY, [])\n  deleteFromArray(songs, (item) => {\n    return item.id === song.id\n  })\n  storage.set(FAVORITE_KEY, songs)\n  return songs\n}\n\nexport function loadFavorite() {\n  return storage.get(FAVORITE_KEY, [])\n}\n\n","module.exports = \"data:image/gif;base64,R0lGODlhZABkAKIEAN7e3rq6uv///5mZmQAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBRjA4RUZDMDI3MjA2ODExODA4M0Y1OTQyMzVDRDM3MyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMzE0Rjk3NDdDRTgxMUUzOUJCRjk0NjAxMUE1NzRBMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMzE0Rjk3MzdDRTgxMUUzOUJCRjk0NjAxMUE1NzRBMCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDVBMTZDQjczOTIwNjgxMTgwODNGNTk0MjM1Q0QzNzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QUYwOEVGQzAyNzIwNjgxMTgwODNGNTk0MjM1Q0QzNzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+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\""],"sourceRoot":""}